\documentclass[12pt]{article}
\usepackage[dvips]{epsfig}
\usepackage{color}
\usepackage{url}
\usepackage[colorlinks=true]{hyperref}

\begin{document}

\section*{GENESIS: Documentation}

{\bf Related Documentation:}
% start: userdocs-tag-replace-items related-tutorial
% end: userdocs-tag-replace-items related-tutorial

\section*{Recording Techniques in Electrophysiology}

For a brief introduction to electrophysiological recording techniques see the Wikipedia article on \href{http://en.wikipedia.org/wiki/Electrophysiology#Current_clamp}{\bf Electrophysiology}. An overview of the voltage clamp method can be found in the book {\it Neuroscience} (Purves D, Augustine GJ,  Fitzpatrick D, Katz LC, LaMantia A-S, McNamara JO \& Williams MS 2001. 2nd ed. Sinauer Associates. Sunderland, MA)--\href{http://www.ncbi.nlm.nih.gov/bookshelf/br.fcgi?book=neurosci&part=A174}{\bf The\,Voltage\,Clamp\,Method} or for a similar Wikipedia article see \href{http://en.wikipedia.org/wiki/Voltage_clamp}{\bf Voltage\,clamp}. For a more detailed discussion of these techniques see the \href{http://www.moleculardevices.com/pages/instruments/axon_guide.html}{\bf Axon\,Guide}.

\section*{GENESIS Perfect Clamp Utility}

The GENESIS perfect clamp utility provides a simple but ``perfect'' voltage or current clamp to one or more specified compartment(s) of a neuronal morphology. Here, we describe how to use it from the {\bf GENESIS\,Shell} (\href{../gshell/gshell.tex}{\bf G-Shell}). We outline the creation and application of either a voltage or current clamp to the soma of a model Purkinje cell, how to check the clamp, run a simulation, and where to find the output.

It is assumed that you are familiar with the contents of the following GENESIS documentation: \href{../tutorial1/tutorial1.tex}{\bf Tutorial\,1} and \href{../tutorial2/tutorial2.tex}{\bf Tutorial\,2}.

\subsection*{Running the Perfect Clamp Utility}

\begin{enumerate}
	\item{\bf Start a GENESIS shell:} From a terminal prompt, enter
	\begin{verbatim}
	   $ genesis-g3
	\end{verbatim}
	
	\item{\bf Load a cell morphology:} As an example we use the De Schuter and Bower Purkinje cell model.
	\begin{verbatim}
	  genesis  > ndf_load cells/purkinje/edsjb1994.ndf
	\end{verbatim}
	
	\item{\bf Check to see if the input class template for the perfect clamp is available in the shell:}
	\begin{verbatim}
	   genesis > inputclass_templates_show
	\end{verbatim}
	This request should generate the following output:
	\begin{verbatim}
	   all input class templates: 
	      perfectclamp:
	         module_name: Experiment
	         options:
	            command: command value
	            name: name of this inputclass
	         package: Experiment::PerfectClamp
	\end{verbatim}	
\end{enumerate}

\subsection*{Create Voltage Clamp}

\begin{enumerate}

	\item{\bf Create the voltage clamp circuitry object:} Enter the following commands on a single input line:
	\begin{verbatim}
	   genesis > inputclass_add perfectclamp voltage_clamp_protocol name voltage_clamp_protocol command -0.060
	\end{verbatim}
	These commands create a voltage clamp object with a command voltage or holding potential of -60\,mV. (Remember that GENESIS uses SI units.)
	
	\item{\bf Check that the voltage clamp object has been created:}
	\begin{verbatim}
	   genesis > inputclass_show
	\end{verbatim}
	This request should generate a description of the voltage clamp object you have just created:
	\begin{verbatim}
	   all input classes: 
	      voltage_clamp_protocol:
	         module_name: Experiment
	         options:
	            command: -0.60
	            name: voltage_clamp_protocol
	         package: Experiment::PerfectClamp
	\end{verbatim}
\end{enumerate}

\subsection*{Apply Voltage Clamp}

\begin{enumerate}
	\item{\bf Apply the voltage clamp at the Purkinje cell soma:}
	\begin{verbatim}
	   genesis > input_add voltage_clamp_protocol /Purkinje/segments/soma Vm
	\end{verbatim}
	
	\item{\bf Check that the voltage clamp has been correctly applied:}
	\begin{verbatim}
	   genesis > input_add
	\end{verbatim}
	This request should return information about the voltage clamp input applied to the Purkinje cell soma:
	\begin{verbatim}
	   - component_name: /Purkinje/segments/soma
	      field: Vm
	      inputclass: voltage_clamp_protocol
	   \end{verbatim}
\end{enumerate}

\subsection*{Create Current Clamp}

\begin{enumerate}
	\item{\bf Create the current clamp circuitry object:} Enter the following commands on a single input line:
	\begin{verbatim}
	   genesis > inputclass_add perfectclamp current_clamp_protocol name current_clamp_protocol command 1e-9
	\end{verbatim}
	These commands create a current clamp object with a command current of 1\,nA. (Remember that GENESIS uses SI units.)
	
	\item{\bf Check that the current clamp object has been created:}
	\begin{verbatim}
	   genesis > inputclass_show
	\end{verbatim}
	This request should generate a description of the current clamp object you have just created:
	\begin{verbatim}
	   all input classes: 
	      current_clamp_protocol:
	         module_name: Experiment
	         options:
	            command: 1e-9
	            name: current_clamp_protocol
	         package: Experiment::PerfectClamp
	\end{verbatim}
\end{enumerate}

\subsection*{Apply Current Clamp}

\begin{enumerate}	
	\item{\bf Apply the current clamp at the Purkinje cell soma:}
	\begin{verbatim}
	   genesis > input_add current_clamp_protocol /Purkinje/segments/soma INJECT
	\end{verbatim}
	
	\item{\bf Check that the current clamp has been correctly applied:}
	\begin{verbatim}
	   genesis > input_show
	\end{verbatim}
	This request should return information about the current clamp input applied to the Purkinje cell soma:
	\begin{verbatim}
	   - component_name: /Purkinje/segments/soma
	      field: INJECT
	      inputclass: current_clamp_protocol
	   \end{verbatim}
\end{enumerate}

\subsection*{Add Output for Voltage or Current Clamp}

\begin{enumerate}
	\item{\bf Add an output for the somatic clamp:}
	\begin{verbatim}
	   genesis  > output_add /Purkinje/segments/soma Vm
	\end{verbatim}
	
	\item{\bf Add a dendritic output:} Similarly, we can add an output for the voltage clamp to one or more dendritic compartments.
	\begin{verbatim}
	   genesis > output_add /Purkinje/segments/b0s01[56] Vm
	   genesis > output_add /Purkinje/segments/b1s06[137] Vm
	   . . .
	\end{verbatim}
	{\bf Note:} For the model cell loaded, you can identify the path and name of dendritic segments with the following command:
	\begin{verbatim}
	   genesis > list_elements /Purkinje/segments
	\end{verbatim}	
	This generates a (long) list of all segments in the morphology of the cell that is loaded. For more information about traversing the cell model see \href{../tutorial2/tutorial2.tex}{\bf Tutorial\,2}.
\end{enumerate}

\subsection*{Check Model, Run Simulation, and Find Output}

\begin{enumerate}
         \item{\bf Check model prior to running simulation:}
	\begin{verbatim}
	   genesis > check /Purkinje
	\end{verbatim}
	
	\item{\bf Run the simulation for 100 ms:}
	\begin{verbatim}
	   genesis > run /Purkinje 0.1
	\end{verbatim}
	
	\item{\bf Where is the output?}
	\begin{verbatim}
	   genesis > sh cat /tmp/output
	\end{verbatim}
\end{enumerate}


\end{document}
