\documentclass[12pt]{article}
\usepackage{verbatim}
\usepackage[dvips]{epsfig}
\usepackage{color}
\usepackage{url}
\usepackage[colorlinks=true]{hyperref}

\begin{document}

\section*{GENESIS: Documentation}

{\bf Related Documentation:}
% start: userdocs-tag-replace-items related-do-nothing
% end: userdocs-tag-replace-items related-do-nothing

\section*{Developer Installation Mac OSX}

The procedure for the installation of GENESIS on a Mac OSX is similar to that for a Linux build on a regular PC. The major difference is that it requires build tools for the Mac. These are somewhat hidden on disk 2 of the Mac OS installation disks. Installation requires administrator privileges. ({\bf Note:} Some installation must be done from the Terminal). If you do not have administrator privileges you should contact your system administrator for help. The Terminal can be found in the Applications --$>$ Utilities folder. For regular use of GENESIS it is convenient to place a Terminal in the dock for easy access.
Installation requires executing the following major steps:
\begin{itemize}
   \item[] Prepare and upgrade the system software.
   \item[] Download and install the developer package.
   \item[] Install the software packages.
   \item[] Check if the installation was successful. 
\end{itemize}

\subsection*{Prepare and upgrade the system software}

Install the following packages:
\begin{itemize}
   \item[]\href{http://monotone.ca/}{\bf monotone-0.44:} (or higher).
   \item[]{\bf Xcode Tools:} The Apple Development Toolset. Xcode is available on Disk 2 of the Mac OSX installer set of DVDs under optional install. The package is called {\it  XcodeTools.mpkg}. It is also available from the \href{http://developer.apple.com/technology/xcode.html}{\bf Apple Developer Website}. In the latter case  you will need a valid Apple ID to log in and access the developer page.
   
   {\bf WARNING:} The compilers available from MacPorts should NOT be used for installation (see below). Prior to installing the {\it DeveloperPackage} you should check which Perl libraries OSX uses with ``{\tt  which perl}''. This should return {\tt  /usr/bin/perl}. If the response is {\tt /opt/local/bin/perl}, there is a MacPorts installation of Perl. This is most easily corrected by removing the MacPorts path {\it /opt/local/bin} from your path in the {\it .profile} file in your home directory. To do this open the  {\it .profile} file in an editor and convert the line (or similar):
\begin{verbatim}
   PATH=/opt/local/bin:/usr/local/bin:$PATH
\end{verbatim}
by removing {\it /opt/local/bin} to give:
\begin{verbatim}
   PATH=/usr/local/bin:$PATH
\end{verbatim}
{\bf Note:} Only remove the MacPorts path and leave all others alone. If you do not make this change, running GENESIS may result in a bus error as the correct Perl libraries will not be found. It may also call MacPorts versions of build tools, which can result in some undesirable behavior.  

   
   \item[]Install the following Perl dependencies via CPAN:
      \begin{itemize}
         \item YAML
         \item Digest::SHA
         \item Inline
         \item Parse::RecDescent
         \item Expect (and its dependency perl-IO)
         \item ExtUtils
         \item Data::Utilities
         \item File::Find::Rule
         \item Term::Readline
      \end{itemize}
   \end{itemize}
This can be done, for example, by entering the following at a terminal prompt:
\begin{verbatim}
   $ sudo perl -MCPAN -e shell
\end{verbatim}
Then at the {\tt cpan>} prompt enter:
\begin{verbatim}
   cpan> force install YAML
   . . . 
\end{verbatim}
   
\subsection*{Download and Install the {\it DeveloperPackage}}

Download the latest version of the {\it DeveloperPackage}, available from \href{http://sourceforge.net/projects/neurospaces/files/}{Sourceforge}.  It is called {\it developer-release-label.tar.gz}, where {\it release-label} is the current release identifier. ({\bf Note:} If downloading via your browser, do not unpack the package during the download as it will be placed into its own subdirectory).
\begin{itemize}
   \item[] Change to the directory where you downloaded the file.
   \item[] Unpack archive: ``{\tt tar xfz developer-release-label.tar.gz}''.
   \item[] Change to the directory with the content of the archive: ``{\tt cd developer-release-label}''.
   \item[] Configure the {\it DeveloperPackage}: ``{\tt ./configure}''.
   \item[] Compile and install the {\it DeveloperPackage}: ``{\tt sudo make install}'' (requires administrator privileges).
\end{itemize}

\subsection*{Install software packages}

Once the above dependencies are installed source code can be pulled from the GENESIS repository and a build performed with the following commands:
\begin{enumerate}
   \item{\it neurospaces\_create\_directories}
   \item{\it neurospaces\_pull}
   \item{\it neurospaces\_update}
   \item{\it neurospaces\_configure}
   \item{\it neurospaces\_install} (requires admin password) 
\end{enumerate}

\subsection*{Check if installation was successful}

Once these have completed the installation can be tested with the following command:
\begin{itemize}
   \item[]{\tt neurospaces\_check $>$/tmp/check.out 2$>$\&1}
\end{itemize}
This will perform a series of regression tests and save the output to file. The output can be checked by typing ``{\tt less /tmp/check.out}''. Importantly, search for lines containing the string {\tt error\_count} that will indicate any inconsistencies with the installation.

{\bf Note:} The running of tests is optional, but strongly advised.


\end{document}
