\documentclass[12pt]{article}
\usepackage[dvips]{epsfig}
\usepackage{color}
%e.g.  \textcolor{red,green,blue}{text}
\usepackage{url}
\usepackage[colorlinks=true]{hyperref}
\usepackage{scrtime}
 
\begin{document}

{\bf Related Documentation:}
% start: userdocs-tag-replace-items related-todo
% end: userdocs-tag-replace-items related-todo

\section*{GENESIS: Documentation}

\section{The TODO and the DONE List}

This document contains a list of functions and descriptions that need
to be implemented or incorporated in the software or software
infrastructure.  The level of detail of the descriptions can vary
between items.  After an item is described, it can be followed by a
checklist with information of the level of implementation.  For
example, subitems in the checklist can be marked with the word `DONE'.

This document can grow when people add new functions that await
implementation, and it can be consolidated by moving items that have
been completed from the TODO list to the DONE list.  Items are never
removed from the DONE list.
%  Some functions
%are related to maintenance and they never disappear (such as Packaging
%and Distribution).  They can be marked with 'WORKING'.

This TODO list was built on \today, \thistime.


\section{G-3 Release TODO List}

\subsection{Add Network Modeling Support}

Network modeling support still requires substantial development on one
software component, and also impacts other software components.

\begin{itemize}
\item DES
  \begin{itemize}
  \item instantiation of DES queuer stand-alone (DONE)
  \item instantiation of DES distributor stand-alone (DONE)
  \item tests of DES stand-alone (DONE)
  \end{itemize}
\item model-container
  \begin{itemize}
  \item instantiation of projections/connections by model-container (DONE)
  \item inspection of projections/connections by model-container API (DONE)
  \end{itemize}
\item SSP
  \begin{itemize}
  \item instantiation of DES queuer from SSP (partial)
  \item instantiation of DES distributor from SSP (partial)
  \item translation of model-container connections to DES connections (partial)
  \item tests for SSP
  \end{itemize}
\item G-Shell
  \begin{itemize}
  \item add integration commands to G-Shell
  \item tests for G-Shell
  \end{itemize}
\item backward compatibility
  \begin{itemize}
  \item integration of planar/volume connect command
  \item tests for backward compatibility
  \end{itemize}
\end{itemize}


\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & 3 weeks \\
    \hline
    Assigned to
    & Hugo \\
    \hline
  \end{tabular}
\end{center}


\subsection{ns-sli installed G-2 scripts}

\begin{itemize}
\item The tests scripts of ns-sli are not included in the tarball.  As
  a consequence they are not inluded in the rpm nor deb packages.
\item Change loop: Mando's change solved this, Hugo undid the change
  for reasons mentioned in an email from Hugo to Mando.
\end{itemize}


\subsection{symmetric compartments (2)}

Connect the NEURON compartmental solver to the model-container.

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & \\
    \hline
    Assigned to
    & Hugo \\
    \hline
  \end{tabular}
\end{center}


\subsection{Slow operations on MAC OSX}

Heavy memory operations such as {\bf pqsetall} run slowly on Mac OSX to the point of causing several tests to fail. Test errors are inconsistent, and different tests will fail on different test runs.

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & ? day for a detailed diagnosis \\
    \hline
    Assigned to
    & Mando \\
    \hline
  \end{tabular}
\end{center} 


\subsection{Stalling error on MAC OSX}

There is an issue with stalling on the Mac OSX Leopard. The result is a stalled process with no CPU activity. The error is inconsistent and only seems to occur when the target machine is running other high memory tasks. From examining the state of the process during the lock it appears to be a system lock on a print statement. 

The stall error currently occurs during the nesting.t test sometime after {\bf pqsetall} has been called. 

A similar problem was found \href{http://lists.apple.com/archives/darwin-dev/2008/Jan/msg00139.html}{here} on the Apple forums.

The same type of stall occurred previously when running the command {\bf ./neurospacesparse -v 1 -q legacy/networks/supernetwork.ndf} in the model container function QueryHandlerPrintSpikeRecieverCount() . This stall error has not been observed in well over a year when running this command and currently does not produce it.

A comment has been placed in the section of code in the model container where the error occurs at line 6133 in querymachine.c.

Previous measures to diagnose were to use the {\bf Instruments} application \(A trace program\) to see exactly where the process was locking, which lead to discovering the information on the Apple forums. 

7/25/2010: Found the point of the stall during a test run to be at the \"system \$shell\_command;\" call in neurospaces\_harness.

8/30/2010: Made some changes in an attempt to remove the stalling, instead get an error at "select\$DARWIN\_EXTSN" as opposed to the low level write statement "write\$NOCANCEL\$UNIX2003". Stall remains so won't check in the changes since it did not fix the problem.

8/31/2010: Using ptkdb and running different operating systems side by side I've narrowed down the possible error to the perl Expect module, which seems to behave a bit differently on Mac OSX compared to CentOS and Ubuntu. For the tests which start with a command that outputs expected output with a following test case that does not write, only reads this output, the output of the prompt starting the program along with the programs output is concatenated together. This causes the test to fail, but since this read only happens on the first test specification, subsequent tests pass. 

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & ? day for a detailed diagnosis \\
    \hline
    Assigned to
    & Mando \\
    \hline
  \end{tabular}
\end{center}


\subsection{Simulator Performance Benchmarking}

Performance Benchmarking is traditionally classified in phases of
model-construction time and simulation run-time.  Test the performance
of the Purkinje cell in each of the following environments:

\begin{itemize}
\item GENESIS\,2 (old GENESIS\,2 enviroment).  What is the time taken
  by the simulator to run 1 second of simulation in G-2?
\item NS-SLI (GENESIS\,3--GENESIS\,2 backward compatibility).  What is
  the time taken when running 1 second of simulation in G-3 using the
  the NS-SLI module to read the original G-2 scripts that encode the
  Purkinje cell model?
\item SSP (GENESIS\,3 batch simulation environment).  What is the time
  taken when running 1 second of simulation in G-3 from a UNIX shell
  command line with the Purkinje cell model encoded in NDF format?
\item G-Shell (GENESIS\,3 interactive simulation environment).  What
  is the time taken when running 1 second of simulation in G-3 from
  the interactive G-3 shell with the Purkinje cell model encoded in
  NDF format?
\end{itemize}

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & 2 days \\
    \hline
    Assigned to
    & Hugo \\
    \hline
  \end{tabular}
\end{center}


\subsection{Demonstration Scripts}

The following scripts have been selected for use as demonstration
scripts:

\begin{itemize}
\item Purkinje Cell Scripts from Erik De Schutter: some of the scripts
  are used for regression tests (and work correctly).  Other Purkinje
  cell scripts still need validation.
\item Rallpacks: for benchmarking it would be useful to implement
  scripts for the rallpack standard.  To show the relationships
  between the different GENESIS\,3 interfaces, it is useful to
  implement these scripts in the different interfaces currently
  available (Perl, Python, NS-SLI, NDF, Experiment, Heccer, G-Shell).

  For visibility and good integration with the rest of the system, it
  would be best to integrate these scripts with the regression tester,
  such that they are validated and documented on a daily basis.
  \begin{itemize}
  \item Rallpack 1: Passive unbranched cable.
  \item Rallpack 2: Branched cable.
  \item Rallpack 3: Squid axon/Active cable.
  \item Integrate with Tests.
  \end{itemize}
\end{itemize}

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & 2 days per scripting language \\
    \hline
    Assigned to
    & Allan and Dave? \\
    \hline
  \end{tabular}
\end{center}


\subsection{Cleanup Packages Archive}

There are redundant packages and directories in
http://repo-genesis3.cbi.utsa.edu/deb/ and other download directories.
Ideally there is only one directory for each set of deb packages, and
all the deb packages are listed there as one flat list.


\subsection{Release Notes}

\begin{itemize}
\item See also \href{../release-notes/release-notes.tex}{release-notes.tex}
\item Document that describes the release.
  \begin{itemize}
  \item Compile a list of G-3 capabilities, compile them from each of the components.
  \item Statements about:
    \begin{itemize}
    \item Backward compatibility.
      \begin{itemize}
      \item Clarify the level of backward compatibility. 
      \item Emphasize on commitment of backward compatibility.
      \item Support of conversions from G2 to G3 for the next two years.
      \item explain policies for feature requests.
      \item Rallpacks.
      \item Does the purkinje cell and its various stimulation protocols.
      \item please try your simulations and report problems
      \end{itemize}
    \item NeuroML support (passive compartments).
    \item PyNN support, placeholder for an interface to PyNN through the
      {\it pynn\_load} command
    \end{itemize}
  \item Installation.
    \begin{itemize}
    \item Compile a list of dependencies (DONE, see installation documentation).
    \item Create an integrated installation tar ball or so (DONE, on repo).
    \item add deb and rpm packages (DONE, on the repo, see other point).
      % (http://www.artificialworlds.net/blog/2007/02/22/creating-deb-and-rpm-packages/).
    \item Release levels: G-3 Hacker (coherent release for technical
      users), G-3 Intermediate (also for script users, includes python
      for the creation of GUIs and projects), G-3 Full (include
      complete GUI).
    \item Release plan: alpha, beta, full release.
    \item Synchronize userdocs and wiki installation docs (DONE).
    \end{itemize}
  \item Mailing lists, discussion boards and other genesis related systems.
    \begin{itemize}
    \item What are they used for?
    \item What do we want them to be used for? Why?
    \item Add {\ hg} repository (unnecessary?).
    \item Add bulletin boards and mailing lists.
    \item Add NS related systems.
      \begin{itemize}
      \item www.neurospaces.org
      \item Blog.
      \end{itemize}
    \end{itemize}
  \item alpha: Mid-October.
  \item beta1: Mid-January.
  \item beta2: Mid-March.
  \item full: Mid-July.
  \end{itemize}
\end{itemize}

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & 2 days \\
    \hline
    Assigned to
    & Allan and Dave \\
    \hline
  \end{tabular}
\end{center}


\subsection{Announce GENESIS\,3 alpha1}

Write an announcement of the GENESIS\,3 alpha1 release to the
connectionist,
compneuro,
genesis-users
email lists.  Signed with Hugo Cornelis, Allan Coop,
Mando Rodriguez, Dave Beeman, James Bower.

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & \\
    \hline
    Assigned to
    & \\
    \hline
  \end{tabular}
\end{center}


\subsection{Report Document for Testers}

Construct a report document with instructions for alpha and beta
testers.  The instructions consist of installation instructions and a
questionnaire about basic application functionality.

Questionnaire must be put on the website.


\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & 3 days \\
    \hline
    Assigned to
    &  Allan and Dave? \\
    \hline
  \end{tabular}
\end{center}


\subsection{Packaging and Distribution (for the alpha1 Release)}

Packaging involves the creation of tarballs with source code to the
creation of binary packages for different OSs.

For packaging and distribution of the alpha release of GENESIS\,3.0,
each software component must implement the following makefile targets:

\begin{itemize}
\item {\it dist}: for creation of the tarball with source code.
  Create an installer script that builds the tarball of each package
  (neurospaces\_dist) (DONE).
\item {\it pkg-deb}: for creation of a binary archive for debian based
  Linux distributions (including Ubuntu). - (95\%)
\item {\it pkg-rpm}: for creation of a binary archive for rpm based Linux
  distributions (such as Redhat and Fedora). - (DONE)
\item MAC .dmg file. - (DONE)
\end{itemize}

Communicate with the previous debian maintainers about this.  They are
Sam Hocevar (Debian packages) sam+deb at zoy.org and Matt Zimmerman
mdz at csh.rit.edu

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & 4 days \\
    \hline
    Assigned to
    & Mando \\
    \hline
  \end{tabular}
\end{center}


\subsection{Daily Releases and Release Labels}

The installer scripts can update the release labels in the source code
automatically, and check them in into the source code repositories.
The checkin should be done on a branch 'dist' to prevent contamination
of the default '0' branch with versions that reconfigure the software
with new release labels.

The checkin should be made visible from the repository server (ie. the
tester should push its changes from its repository to the server
repository).

Currently date based.  This does not work with distributed version
control.  The only way to version files in a distributed environment
is using the version control identifiers.

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & 3 days \\
    \hline
    Assigned to
    & Mando \& Hugo \\
    \hline
  \end{tabular}
\end{center}


\subsection{Source code Configuration}

Fix automake scripts to detect different operating systems 
and build makefiles accordingly:


\begin{itemize}
\item {\it Fedora 11}: Compensate for libhistory being built into the
  installed libc.
\item {\it BSD}: Not currently supported.
\item {\it Solaris 10}: Not currently supported.
\end{itemize}

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & 2 Days\\
    \hline
    Assigned to
    & Mando \\
    \hline
  \end{tabular}
\end{center}


\subsection{GUI: Construct Model}

\begin{itemize}
\item Import from External Library:
  \begin{itemize}
  \item Displaying NDF library is working. (DONE)
  \item Get the GUI read from external libraries on the net.
  \item Add support for different file types like SWC. (25\% done)
  \end{itemize}
\item Create Model: Create interface to allow a user to create a
  simple model via text and/or graphics.
\item Explore Model: Create a graphics widget which displays the
  morphology when clicking 'explore model'.  Remove Studio from output
  menu.
\item Load Project: Get GUI to load a project based on a yaml file
  which includes all relevant input and result files (DONE).
\item Save Project: Get save model to work properly (save a project
  file as well as all included files) (DONE)
\item Load Tutorial: Display a list of clickable tutorial links and
  have the GUI open them in a web browser of html widget. (50\% done)
\item Create Project: Present a wizard so a user may click on menus
  to initlialize a new project. (75\% done)
\end{itemize}

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & 2 - 3 weeks \\
    \hline
    Assigned to
    & Mando \\
    \hline
  \end{tabular}
\end{center}


\subsection{GUI: Run Simulation (2)}
\begin{itemize}
\item STOP: Get `stop' simulation to properly work (not sure how this
  will work since the G-Shell is stop and wait).
\item SAVE: Save model state. 
\item LOAD: Get GUI to load a previous save state. (20\% done)
\item Runtime Option: create a menu for adding runtime options.
\end{itemize}

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & 2 - 3 days \\
    \hline
    Assigned to
    & Mando \\
    \hline
  \end{tabular}
\end{center}


\subsection{GUI: Output}
\begin{itemize}
\item Matlab: Create export menu/functionality for matlab.
\item xmgrace: Create export menu/functionality for xmgrace.
\item Mathematica: Create export menu/functionality for Mathematica.
\end{itemize}

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & 1 - 2 weeks \\
    \hline
    Assigned to
    & Mando \\
    \hline
  \end{tabular}
\end{center}


\subsection{GUI: Iterators}
Add menus/functionality to the iterator menu.

Put a couple of iterator scripts of the purkinje cell comparison and
the mutual information projects in a directory.  The Iterators menu
lists all the scripts found in this directory, clicking on one of them
runs the appropriate script.  The script generates SSP configuration
files that can be loaded into the GUI.

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & 1 week \\
    \hline
    Assigned to
    & Mando \\
    \hline
  \end{tabular}
\end{center}


\subsection{GUI: Other}
\begin{itemize}
\item Screenshot functionality for plot and explore model. (90\% done)
\end{itemize}

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & 1 week \\
    \hline
    Assigned to
    & Mando \\
    \hline
  \end{tabular}
\end{center}


\subsection{Documentation Framing}

Look and feel of documentation website.

Check what options of the framing functions of tex4ht can be used.


\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & 3 days \\
    \hline
    Assigned to
    & \\
    \hline
  \end{tabular}
\end{center}



\subsection{gshell python}

Document the python dependencies of the gshell.

Currently the gshell requires Inline::Python as a recommended option
to be installed.

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & 1 day \\
    \hline
    Assigned to
    & \\
    \hline
  \end{tabular}
\end{center}


\subsection{symmetric compartments (1)}

Redundant with the other entry of symmetric compartments.

Implement symmetric compartments.  We will have to decide how to do
this: core implementation, or converting each symmetric compartment to
two asymmetric compartments.  This will also likely involve core
design decisions, because the model-container does not distinguish
between symmetric and asymmetric compartments (only the solvers do).

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & \\
    \hline
    Assigned to
    & Hugo \& Mando \\
    \hline
  \end{tabular}
\end{center}


\section{DONE List}

\subsection{Packaging and Distribution (for the alpha1 Release)}

Postponed:

An additional package must be created that has all other software
components of GENESIS\,3 as dependencies.  An installer script must
be created that builds all the OS specific archives and puts them in a
common directory (neurospaces\_dist\_archives).

\subsection{Model\,Container}
Complete the implementation of the {\it ndf\_save} command.  Add tests for
saving a full model, saving a library of models and saving a
modularized part of a model.

\begin{center}
  \vspace{5mm}
  \centering
  \begin{tabular}{|c|c|}
    \hline
    Time Estimate
    & 1 week \\
    \hline
    Assigned to
    & Hugo \\
    \hline
  \end{tabular}
\end{center}

\begin{itemize}
\item there is now an export library function in the model-container
  that exports all the components of a model in the private model
  section of an NDF file.
\item The model is then trivially instantiated in the public model
  section.
\item There is also an export all function in the model-container that
  can save a modularized part of a model (but you loose the
  relationships between individual model components).
\item The gshell ndf\_save command is trivially linked to the export
  library function.
\end{itemize}


\subsection{SSP Optimizer}

The SSP optimizer uses the perl Inline module to inline C code with
perl code.  The Inline module creates a directory hierarchy inside the
current directory to do its work.  The Inline module must be
configured to do this in a standard directory, where all users share
the result.

The installation of SSP must run SSP to do the compilation of the
optimizer, and install it afterwards.  This is to avoid race
conditions between simultaneously running ssp processes.

\end{document}


