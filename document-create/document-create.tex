\documentclass[12pt]{article}
\usepackage[dvips]{epsfig}
\usepackage{url}
\usepackage[colorlinks=true]{hyperref}

\begin{document}

\section*{GENESIS: Documentation}

{\bf Related Documentation:}
% start: userdocs-tag-replace-items related-do-nothing
% end: userdocs-tag-replace-items related-do-nothing

\subsection*{Introduction}

The GENESIS Documentation System is fully automated with versioning under the control of \href{http://monotone.ca/}{\bf monotone}. To learn more about monotone and its use by GENESIS see \href{../version-control/version-control.tex}{\bf Version\,Control} and to learn more about the levels of GENESIS documentation see \href{../documentation-overview/documentation-overview.tex}{\bf Documentation\,Overview}. This document assumes that you are familiar with that material.

Here, we introduce some of the flexibility, features, and requirements of the GENESIS Documentation System. We describe the location of source files within this system and how to create a new document. To learn how to add a new document to the GENESIS version control system see \href{../version-control/version-control.tex}{\bf Version\,Control}. Once a document is under version control and identified with the correct tags (see below) it can be automatically published to be available for other members of the GENESIS community.

\subsection*{Location of GENESIS Documentation}

The documents that make up the GENESIS Documentation System are located in your local workspace, which can be found at the default location
\begin{verbatim}
    ~/neurospaces_project/userdocs/source/snapshots/0
\end{verbatim}
The source materials for individual GENESIS documents can be found in uniquely named folders/directories located in your local workspace. One of the directories in the workspace should be named\,{\it NewDocument}. This directory and the files it contains provide a template for a generic GENESIS document. The files included by default are\,{\it descriptor.yml} and\,{\it NewDocument.tex}, and a sub-directory named\,{\it figures}.

\subsubsection*{The Default YML Descriptor File}

The name of the descriptor file\,{\it descriptor.yml} should not be changed. The default contents of this file include:

\begin{verbatim}
---
comment: Optional comment.
description: Briefly describe document contents here. 
document name: Insert a user readable document name here.
summary: Document summary for contents page link. 
tags:
  - genesis3
  - level2
  - published
\end{verbatim}

\begin{itemize}

\item {\tt ---} The three dashes on the first line of the file {\it descriptor.yml} are part of the Y Markup Language (YML) syntax for automated software engineering (see \href{http://fdik.org/yml/}{\bf http://fdik.org/yml/}). {\bf Note:} The meaning of the white space/indents in the\,{\it descriptor.yml} file is defined for YML.

\item {\tt comment:} Optional comment about the documentation file, e.g. reason for being tagged {\tt -\,obsolete}.

\item {\tt description:} The default file description ``Briefly describe file contents here.'' should be replaced with a short description of the subject matter of the documentation file. It is recommended that this file description is less than 80 characters on a single line.

\item {\tt document name:} Provide a document name which gives the title of the documentation file. This name is used as a link to the given file in the GENESIS Documentation System. This name is independent of and should be more human readable than the actual name of the document file it identifies.

\item {\tt summary:} This attribute is not present in the {\it New\,Document} template. However, if present, it should be followed by a short description of the contents of the document. This description will appear after the document name on the contents index page of the documentation level given by the (for example here) {\tt -\,contents-level1} tag (see below).

\item {\tt tags:} List of any tags used to identify the current document. The default tags include {\tt -\,genesis3}, {\tt -\,level2}, and {\tt -\,published}. These tags indicate that the document is part of the GENESIS Documentation System at the level of User Guides and Documentation (Level 2) and that that the document will be published when documentation is rebuilt (see \href{../neurospaces-cron/neurospaces-cron.tex}{\it neurospaces\_cron}), but that in the absence of a {\tt - contents-level2} tag, the document name will not appear in the Level 2 Contents index (see below).

\begin{itemize}

   \item New tags may be created by adding them to the {\it descriptor.yml} file, but see below for a list of the tags currently recognized.  Note that the tagging system is case insensitive to avoid tag duplication.

   \item Importantly, each of the directories {\tt contents-level1}\,\ldots {\tt contents-level7} in your local workspace contains a list of the documentation to be found at the given level. These content indices are generated automatically during a GENESIS installation, a {\tt userdocs} module installation, or a GENESIS update. They provide direct links to all documents tagged for the given level of documentation.
   
\end{itemize}

\end{itemize}

\subsubsection*{The Default Documentation Source File}

Source files for the GENESIS Documentation System are currently produced with the \LaTeX\,typesetting package (see \href{http://www.latex-project.org/}{\bf www.latex-project.org}). It is planned that Microsoft Word ({\tt .doc} format) and OpenOffice ({\tt .odt}, ODF format) file formats will also be automatically recognized by the GENESIS Documentation System.

The default \LaTeX\, documentation source file\,{\it NewDocument.tex} in the {\it NewDocument} folder can be compiled to produce a readable PDF file. It gives help and examples for colorizing text, generating static hyperlinks to local and remote documentation, and how to insert a figure into your documentation.

\subsubsection*{Related Documentation Hyperlinks}

These are created via the tag construct located under the {\bf Related Documentation} heading at the beginning of the {\it NewDocument.tex} file. 

\subsubsection*{The Figures Folder}

This directory contains any figures that your new document source file may include. The name of this folder should not be changed.

\section*{Incorporate a Pre-existing Document, File, or Video}

The GENESIS Document System recognizes a number of different file formats. The purpose is to allow preexisting documentation to be directly included without having first to be converted to the \LaTeX\,format.

To incorporate a pre-existing document into the GENESIS Document System:

\begin{enumerate}

\item Include a tag in the {\it descriptor.yml} file in the document directory. Currently, the following file format tags are recognized (Note. No tag is necessary for either \LaTeX\,files as the .tex file name suffix is the default for the GENESIS Documentation System or eps files in the {\it figures} folder):

\begin{itemize}

\item[]{\bf - eps} Encapsulated postscript.
\item[]{\bf - html} Hypertext markup language.
\item[]{\bf - pdf} Portable document format.
\item[]{\bf - png} Portable network graphics.
\item[]{\bf - ps} Postscript.

\end{itemize}

\item Place the document file in the document directory (NOT the {\it figures} sub-directory).

\end{enumerate}

It is also possible to incorporate audio files and videos as part of documentation. The recognized audio file format tags include:

\begin{itemize}

\item[]{\bf - wav} Microsoft .wav file format.
\item[]{\bf - mp3} Digital audio encoding format.

\end{itemize}

To incorporate video into a GENESIS document: 

\begin{enumerate}
   \item Create an account with a video sharing website, e.g. \href{http://www.youtube.com/create_account}{\bf YouTube}.
   \item Upload your video(s).
   \item Embed a link to the video(s) into the document describing their contents. See \href{../NewDocument/NewDocument.tex}{\bf NewDocument}, for further details.
\end{enumerate}

Incorporation of pre-existing documentation in one of the above formats is the only time that the document directory name and the document name do not have to match (see further below). Note that with document incorporation (c.f. creation) the document to be included is located in the document directory and NOT the {\it figures} directory.
 
\section*{Create a New Document}

There are four simple steps to the creation of a new document within the GENESIS Documentation System.

\begin{enumerate}

\item {\bf Make a new document:} Copy the\,{\it NewDocument} template folder to the name of the new document you want to make. Change the name of the \LaTeX\,\,\,file\,{\it NewDocument.tex} inside the renamed folder to the name of your new document. To do this replace the\,{\it NewDocument} part of the default source file name with the new name you have just given to the\,{\it NewDocument} folder.

This will result in both the documentation directory and the source file having the same name (with the exception of the {\tt .tex} extension of the source file). For example, the name of the directory containing this document is {\it document-create} and the name of the source file it contains is\,{\it document-create.tex}.

Importantly, remember that the names of the descriptor file\,{\it descriptor.yml} and the directory\,{\it figures} located in the document folder are required by the GENESIS Documentation System and should not be changed.

\item {\bf Add a set of related hyperlinks:} Hyperlinks to one or more related documents (usually outside the scope of the GENESIS Documentation System) are by default located at the beginning of each document source {\tt .tex} file following the {\bf Related Documentation:} heading. The generation of these links is controlled by a tagging construct which is automatically expanded whenever the document system is rebuilt:
\begin{verbatim}
   % start: userdocs-tag-replace-items <related-do-nothing>
   % end: userdocs-tag-replace-items <related-do-nothing>
\end{verbatim}
The default tag for the reference hyperlink system is {\tt <related-do-nothing>}, which allows a document to be created and published in the absence of any reference hyperlinks. 

More than one reference hyperlink can be added to a document. Each added link requires its own tagging construct and is identified by a tag you create that replaces the default tag. The replacement tag should have the following form:
\begin{verbatim}
   related-<your-tag-name>
\end{verbatim}
where {\tt <your-tag-name>} is replaced by an identifier you create. This tag must also be placed in the {\it descriptor.yml} file (see next section) of the document you want to reference for the hyperlink to functionally appear at the head of the document.

Note that the default reference hyperlink {\tt related-do-nothing} relies on a document called \href{../do-nothing/do-nothing.tex}{\it do-nothing.tex}. 

\item {\bf Update the descriptor.yml file:} Each directory/file in the GENESIS Documentation System is tagged on the basis of its content, for example:

   \begin{enumerate}

      \item  {\bf The GENESIS version:} This tags the version of GENESIS that the document refers to, e.g. {\tt -\,genesis3}.

      \item {\bf Level of the GENESIS document:} This must be one of the seven levels of the GENESIS Documentation System, which include:
      
      \begin{itemize}
         \item[]\href{../contents-level1/contents-level1.tex}{\tt -\,level1} (introductory documentation)
         \item[]\href{../contents-level2/contents-level2.tex}{\tt -\,level2} (user/developer documentation)
         \item[]\href{../contents-level3/contents-level3.tex}{\tt -\,level3} (autogenerated documentation)
         \item[]\href{../contents-level4/contents-level4.tex}{\tt -\,level4} (autogenerated technical documentation)
         \item[]\href{../contents-level5/contents-level5.tex}{\tt -\,level5} (autogenerated algorithm documentation)
         \item[]\href{../contents-level6/contents-level6.tex}{\tt -\,level6} (autogenerated api documentation)
         \item[]\href{../contents-level7/contents-level7.tex}{\tt -\,level7} (inline source code documentation)
      \end{itemize}

For more on the levels of the GENESIS Documentation System see the \href{../documentation-overview/documentation-overview.tex}{Documentation\,Overview}.

\item {\bf Insert ``Related Document'' hyperlink tags:} If one or more related document hyperlink tags have been inserted into your new document then the same tags must be placed in the {\it descriptor.yml} file of the document to be referenced.

\item {\bf Flag document origin:} If the document has been created from one located on the \href{http://code.google.com/p/neurospaces/w/list}{\bf Neurospaces\,wiki} then a {\tt --wiki} tag should be inserted in the {\it descriptor.yml} file.

\item {\bf Flag document status:} For a given document to be part of the documentation version control system and the GENESIS Documentation System, it must be in a documentation folder along with a {\it descriptor.yml} file that contains only one of either the {\tt -\,draft}, {\tt -\,local}, or {\tt -\,published} tags.

{\bf Note 1:} Importantly, when creating a new document, the default tag ({\tt -\,level1}) in the associated {\it descriptor.yml} file should be replaced with a tag identifying the correct level of the document (see list above).

{\bf Note 2:} The presence of the {\tt -\,contents-level1} tag results in the document name (given by the string following the {\tt document name:} attribute in the YML key/value tuple) being placed in alphabetical order in the contents page of the level specified by the tag. If you do not want the name of the document to appear in the contents page you should remove this tag. This allows multiple documents to be hyperlinked in a summary document (see particularly Level 1 and 2 documentation) without the name of the hyperlinked document also appearing in the contents page of the given level.

{\bf Note 3:} The {\tt-\,published} tag should be replaced with the {\tt -\,draft} tag  while you are working on a document to prevent it being published to the GENESIS website Documentation System. 

{\bf Note 4:} The {\tt -\,contents-level1} and {\tt-\,published} tags are present in the {\it descriptor.yml} template file to allow the {\tt NewDocument} template document to appear in the GENESIS Documentation System. To add your new document to the GENESIS Documentation System, replace the {\tt -\,draft} tag by either the {\tt -\,published} or the {\tt -\,local} tag.  

{\bf Precedence of publication related tags:} Three tags control publication of documents within the GENESIS Documentation System:
\begin{itemize}
	\item[]{\tt -\,draft}: The presence of this tag in the\,{\it descriptor.yml} file associated with a document will prevent the document 
	from being published,  i.e. viewable within a browser. For a document to be publishable, the {\tt -\,draft} tag must be replaced 
	with either the {\tt -\,local} or the {\tt -\,published} tag.
	
	\item[]{\tt -\,local}: This tag indicates that a document will be included into any local build of the the GENESIS Documentation 
	System. The presence of this tag means that a document will be browser viewable on (a) local machine(s), but will not appear as a `published' 
	document on the GENESIS web site at {\tt http://genesis-sim.org}. This tag is useful to developers for checking documentation prior to publication on the web via the GENESIS web site and can be used to control who can view documentation locally.
	
	\item[]{\tt -\,published:} The presence of this tag in the\,{\it descriptor.yml} file will cause the associated document to be published to the GENESIS Documentation System on the GENESIS web site, as long as neither the {\tt -\,draft} nor the {\tt -\,local} tags are present in the same\,{\it descriptor.yml} file (see next item).
	
	\item[]{\bf Note 4:} The three publication related tags are interpreted in a hierarchical manner, such that the presence of the {\tt 
	-\,draft} tag along with either the {\tt -\,local} and/or {\tt -\,published} tag will prevent the document from being included into a 
	build/update of the Documentation System.
		
	\item[]Similarly, absence of the {\tt -\,draft} tag but presence of the {\tt -\,local} tag will prevent publication of a document to the 
	GENESIS web site even if the {\tt -\,published} tag is present.
	
	\item[] {\bf Note 5:} A document will not be published to be browser viewable in the absence of either the {\tt -\,local} or {\tt -\,published} tag. So if documentation is (not) appearing where you expect after an update, it is a good idea to check the 
	publication tags in the {\it descriptor.yml} file.
	\item[] {\bf Note 6:} A document name will not appear in the contents list unless one of the {\tt -\,contents-level1}$\ldots${\tt -\,contents-level7} tags appears in the associated {\it descriptor.yml} file.
\end{itemize}

Tags in the descriptor file currently recognized by \href{../neurospaces\_cron/neurospaces\_cron.tex}{\it neurospaces\_cron} include:
\begin{verbatim}
  tags:
    - level1
    - level2
    - level3
    - level4
    - level5
    - level6
    - level7
    - contents-level1
    - contents-level2
    - contents-level3
    - contents-level4
    - contents-level5
    - contents-level6
    - contents-level7
    - draft
    - published
    - obsolete
    - pdf
    - mp3
    - wav    
\end{verbatim}

Other recommended tags not yet recognized by {\it neurospaces\_cron} include:
\begin{verbatim}
    - genesis2
    - genesis3
    - meta
    - wiki
    - create
    - introduction
    - tutorial
    - document
    - local
    - html
    - png
    - ps
\end{verbatim}
Importantly, remember that the interpretation of the\,{\it descriptor.yml} file by the GENESIS Documentation System is sensitive to white space and indents.
 
\end{enumerate}

\item {\bf Update the\,{\it figures} folder:} Place any figures or images, etc that your source document file contains in the\,{\it figures} directory.

\end{enumerate}

\subsection*{Document Version Tracking and Control}

To learn more about document version tracking and control in the GENESIS Documentation System, see \href{../version-control/version-control.tex}{\bf Version\,Control}.

\subsection*{Document Hyperlink Checking}

The validity of the hyperlinks embedded in GENESIS documentation (see \href{../NewDocument/NewDocument.tex}{\bf NewDocument}) are checked by {\it userdocs\_cron} each time the GENESIS Documentation System is rebuilt. The output of this check can be viewed at \href{http://www.genesis-sim.org/userdocs/webcheck/badlinks.html}{\bf www.genesis-sim.org/userdocs/webcheck/badlinks.html}.

\subsection*{Document Publication}

To learn more about the automated publication of documents in the GENESIS Documentation System, see \href{../publication/publication.tex}{\bf Publication}.


\end{document}
