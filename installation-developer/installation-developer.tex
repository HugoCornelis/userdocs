\documentclass[12pt]{article}
\usepackage[dvips]{epsfig}
\usepackage{color}
\usepackage{url}
\usepackage[colorlinks=true]{hyperref}

\begin{document}

\section*{GENESIS: Introduction}

{\bf Related Documentation:}
% start: userdocs-tag-replace-items related-do-nothing
% end: userdocs-tag-replace-items related-do-nothing

\section*{GENESIS Developer Installation}

\subsection*{Prerequisites}

There are several prerequisites to the construction of a GENESIS development environment. These include:

\begin{itemize}

\item {\bf Required tools:}\,{\it gdb},\,{\it gcc}, and\,{\it (x)emacs} with the\,{\it elisp} packages. Note that the GENESIS \href{../ndf-file-format/ndf-file-format.tex}{NDF file format} has a special\,{\it elisp} package for use with\,{\it (x)emacs}.
\item \href{../version-control/version-control.tex}{{\bf Version control:}} Monotone is used as a statically linked binary (currently version 0.45). As it is a distributed version control system, developers can use,\,{\it monotone} to maintain and exchange their code repositories and executables. Monotone installation is supported by the\,{\it Developer Package} module. 
\item {\bf  The\,{\it DeveloperPackage}:} Can optionally be used to do initial directory layout. Importantly, the\,{\it DeveloperPackage} requires the correct directory layout. See the script {\it neurospaces\_create\_directories}.

\end{itemize}

\subsection*{Where to find a Developer Installation of GENESIS}

The easiest way to get the latest version of the GENESIS source code is via the  \href{../developer-package/developer-package.tex}{\it DeveloperPackage} (see also following sections.)

Source code for GENESIS can be found at:

\href{http://sourceforge.net/projects/neurospaces/files/}{http://sourceforge.net/projects/neurospaces/files/}

\section*{Developing Sources}

%Here we describe the directory structure used for GENESIS development.

GENESIS contains several software \href{../reserved-words/reserved-words.tex}{\bf Components} useful for neural simulations using models based on experimental data:
\paragraph{\bf Each software component can have implementations in several programming languages:} For example, there are Java and C based implementations of the \href{../model-container/model-container.tex}{\bf Model\,Container}.
\paragraph{\bf Each software component has several resources:} For example, source code, documentation, additional tools, etc.
\paragraph{\bf Each software component can have experimental features that are not part of an official distribution:} We call this a branch of the source code (it is irrelevant if such a branch is present in a version control system or not). 

\subsection*{Source Locations}

The source code of a software component is normally put in the directory:
\begin{verbatim}
   $HOME/neurospaces_project/<package-name>/source/ <programming language>/snapshots/<branch name>/
\end{verbatim}
Other resources are put in other directories: For example, documents that are not part of the distribution can be put under:
\begin{verbatim}
   $HOME/neurospaces_project/<package-name>/docs/
\end{verbatim}
Archived patches are located in:
\begin{verbatim}
   $HOME/neurospaces_project/<package-name>/source/ <programming language>/patches/ 
\end{verbatim}

\subsection*{Basic Directory Layout}

Create a directory {\it $\sim$/neurospaces\_project} in your home directory. \\
\noindent Create the directory {\it $\sim$/neurospaces\_project/MTN} to contain all\,{\it monotone} repositories accessible to the\,{\it DeveloperPackage}. \\
\noindent Every software module has its own subdirectory: For example, the\,{\bf Model\,Container} directory ({\it $\sim$/neurospaces\_project/model-container}):

\begin{itemize}
\item[]{\it $\sim$/neurospaces\_project/model-container/docs} contains documentation not included in the distribution. 
\item[]{\it $\sim$/neurospaces\_project/model-container/source/snapshots/0} is the local workspace under monotone control, contains the source code you are working on. 
\item[]{\it $\sim$/neurospaces\_project/model-container/snapshots/0/\_MTN} location of directory with the\,{\it monotone} options specific to the source code.
\item[]{\it $\sim$/neurospaces\_project/model-container/source/snapshots/0/installed} optionally contains a locally installed version of the module.
\item[]{\it $\sim$/neurospaces\_project/model-container/source/snapshots/patches} contains diffs/patches to your code, available on your local machine.
\end{itemize}
The {\it Developer\,Package} has built in support to automate the actions required for a developer installation. It also has many more tools for GENESIS software development. For more information, see the \href{../developer-package/developer-package.tex}{\it DeveloperPackage}.

\subsection*{Configuration}

Configuration is located in the {\it /etc/neurospaces/} directory.

Every software component or tool has its own subdirectory. For example, the {\it morphology2ndf} convertor, part of the {\bf Model\,Container}, has its default configuration in {\it /etc/neurospaces/morphology2ndf}. Configuration files are specified in the \href{http://www.yaml.org/}{\bf YAML} format, because scripting languages like \href{http://www.perl.org/}{\bf Perl} and \href{http://www.python.org/}{\bf Python} have built in support to process YAML, and because YAML is more readable than XML.

Configuration is normally processed as follows:
\begin{enumerate}
\item {\bf Every tool has built in default configuration:} Every tool must be able to work in an intuitive way when no other configuration is found except the default built-in configuration.
\item {\bf Every tool reads its configuration from {\it /etc/neurospaces/$<$tool-name$>$/}:} This is merged with default configuration, possibly overriding default configuration.
\item {\bf Every tool accepts additional configuration from the user:} This is via command line options or otherwise, again possibly overwriting configuration settings generated in the previous step. 
\end{enumerate}
The merging algorithm is defined in the \href{http://search.cpan.org/dist/Data-Utilities/}{\bf Data-Utilities} package, available from \href{http://www.cpan.org/}{\bf CPAN}.

\section*{A Specific Installation Example}

The installer scripts provided by the {\it DeveloperPackage} knows how to work with the directory hierarchy given above. We now show a full example for installing the {\bf Model\,Container}:

\begin{enumerate}
\item It sets up the {\bf Model\,Container} source code repository on your local machine.
\item Checks out the code.
\item Uses the {\it DeveloperPackage} scripts to install all the currently available packages.
\begin{verbatim}
$ mkdir neurospaces_project/
$ cd neurospaces_project/
$ mkdir MTN
$ cd MTN/
$ mtn --db=neurospaces-developer.mtn db init
$ mtn --db=neurospaces-developer.mtn pull repo-genesis3.cbi.utsa.edu:4696 "*"
   mtn: doing anonymous pull; use -kKEYNAME if you need authentication
   mtn: connecting to repo-genesis3.cbi.utsa.edu:4696
   mtn: first time connecting to server repo-genesis3.cbi.utsa.edu:4696
   mtn: I'll assume it's really them, but you might want to double-check
   mtn: their key's fingerprint: cbc91b2ec1d19e95f64cb164cc2166f4bdfe7bf4
   mtn: warning: saving public key for cbiadmin@utsa.edu to database
   mtn: finding items to synchronize:
   mtn:  bytes in | bytes out | certs in | revs in
   mtn:   549.1 k |       510 |  754/754 | 183/183
   mtn: successful exchange with repo-genesis3.cbi.utsa.edu:4696

$ cd ../
$ mkdir developer/
$ mkdir developer/source
$ mkdir developer/source/snapshots/
$ mkdir developer/source/snapshots/0
$ cd developer/source/snapshots/0/
$ mtn --db ~/neurospaces_project/MTN/developer.mtn --branch 0 co .
$ ls
   itemizeaclocal.m4  bin/  configure*  configure.ac  COPYING  docs/ 
   INSTALL  install-sh*  license.txt  Makefile.am  Makefile.in  missing* 
   _MTN/  release-expand.config*  tests/  tests.config  TODO.txt

$ ./configure 
   checking for a BSD-compatible install... /usr/bin/install -c
   checking whether build environment is sane... yes
   checking for gawk... gawk
   checking whether make sets $(MAKE)... yes
   find: tests/data: No such file or directory
   configure: creating ./config.status
   config.status: creating Makefile

$ make
   make[1]: Entering directory `/local_home/hugo/neurospaces_project/ developer/source/snapshots/0'
   make[1]: Nothing to be done for `all-am'.
   make[1]: Leaving directory `/local_home/hugo/neurospaces_project/ developer/source/snapshots/0'

$ sudo make install
   make[1]: Entering directory `/local_home/hugo/neurospaces_project/ eveloper/source/snapshots/0'
   make[2]: Entering directory `/local_home/hugo/neurospaces_project/ developer/source/snapshots/0' test -z "/usr/local/bin" || mkdir -p -- "/usr/local/bin"
   /usr/bin/install -c 'bin/mcad2doxy' '/usr/local/bin/mcad2doxy'
   /usr/bin/install -c 'bin/neurospaces_build' '/usr/local/bin/neurospaces_build'
   /usr/bin/install -c 'bin/neurospaces_status' '/usr/local/bin/neurospaces_status'
   /usr/bin/install -c 'bin/neurospaces_versions' '/usr/local/bin/neurospaces_versions' /usr/bin/install -c 'bin/release-expand' /usr/bin/install -c 'bin/release-extract' '/usr/local/bin/release-extract'
   test -z "/usr/local/neurospaces/developer" || mkdir -p -- "/usr/local/neurospaces/developer"
   /local_home/hugo/neurospaces_project/developer/source/ snapshots/0/install-sh -c -m 644 'tests/introduction.html' '/usr/local/neurospaces/developer/tests/introduction.html'
   /local_home/hugo/neurospaces_project/developer/source/ snapshots/0/install-sh -c -m 644 'tests/specifications/global.t' '/usr/local/neurospaces/developer/tests/specifications/global.t'
   /local_home/hugo/neurospaces_project/developer/source/ snapshots/0/install-sh -c -m 644 'tests/specifications/downloads.t' /local_home/hugo/neurospaces_project/developer/source/ snapshots/0/install-sh -c -m 644 'tests/specifications/developer.t'  '/usr/local/neurospaces/developer/tests/specifications/developer.t'
   /local_home/hugo/neurospaces_project/developer/source/ snapshots/0/install-sh -c -m 644 'tests/specifications/strings/ neurospaces_build--no-compile --no-configure --no-install --regex developer --dry-run --developer --verbose --verbose -- verbose.txt' '/usr/local/neurospaces/developer/tests/ specifications/strings/neurospaces_build --no-compile --no-configure --no-install --regex developer --dry-run --developer --verbose --verbose--verbose.txt'
   /local_home/hugo/neurospaces_project/developer/source/ snapshots/0/install-sh -c -m 644 'tests/specifications/strings /neurospaces_build --tag-build-10 --no-compile --no-configure --no-install --regex developer --dry-run --developer --verbose --verbose--verbose.txt' '/usr/local/neurospaces/developer/tests/ specifications/strings/neurospaces_build --tag-build-10 --no-compile --no-configure --no-install --regex developer --dry-run --developer --verbose --verbose --verbose.txt'
   make[2]: Leaving directory `/local_home/hugo/neurospaces_project/ developer/source/snapshots/0'
   make[1]: Leaving directory `/local_home/hugo/neurospaces_project/ developer/source/snapshots/0'

$ neurospaces_packages
   /usr/local/bin/neurospaces_build:
   enabled packages in order of build:
      - developer
      - model-container
      - heccer
      - ssp
      - studio
      - ns-sli
      - gshell
      - userdocs

$ neurospaces_pull
$ neurospaces_update
$ neurospaces_install
$ neurospaces_check
\end{verbatim}
\end{enumerate}

You can then go to the directory of each individual software component, configure, compile, check, and install the given module. For example, a simple build for the modules {\bf Model\,Container}, {\bf Heccer}, {\bf SSP}, and {\bf Studio} on a developer machine can be done with:  
\begin{verbatim}
   neurospaces_build --developer --regex 'model-container|heccer|ssp|studio'
\end{verbatim}
and to include running tests via the check target of the {\it make} files:
\begin{verbatim}
   neurospaces_build --check --developer \
      --regex 'model-container|heccer|ssp|studio'
\end{verbatim}
However, a {\it DeveloperPackage} has been built that automates these actions while respecting the dependencies between the different modules (ie. each of the mentioned steps is done for each module in the correct order).

\section*{Extending GENESIS Functionality}

GENESIS contains many software components. The source code of the most
important ones are publicly available from a central repository. (The
server {\tt repo-genesis3} is coded as the default server in
the \href{../developer-package/developer-package.tex}{\it DeveloperPackage}, 
a default that can be overwritten using command line
options.) Other software components can be made available from other
sources. The {\it DeveloperPackage}, when configured correctly,
automatically incorporates software components from geographically
distributed sources. The addition of a new software component to GENESIS is the equivalent to adding a new column to the associative array constructed by the {\it DeveloperPackage}. 

New software components can be added to the configuration of the {\it
  neurospaces\_build} script of the {\it DeveloperPackage}. All the other tools of the
{\it DeveloperPackage}, such as tools to compile and install, tools to synchronize
the source code with remote servers, and tools to generate and publish
documentation on a website will work with the new configuration.

For smooth integration with the GENESIS installer, it is a requirement that the top level source directory of the new component contains a {\it configure} script, and a {\it Makefile} with the targets {\it clean}, {\it check}, {\it dist}, {\it distcheck}, {\it install}, {\it uninstall}, {\it docs}, {\it html-upload-prepare}, {\it html-upload}, and {\it dist-keywords}.

\subsubsection*{Creating a new software component}

The following steps should be performed on your developer machine each time you wish to start development of a new software component.

Use the command line arguments ``{\tt --enable <your-software> --regex <your-software>}'' to limit the operations given below to only the software component named. Here, as an example, we use ``{\tt <your-software>}'' which should be replaced by the name of your software component. 

\begin{enumerate}
\item {\bf Add the new software component to the configuration of the {\it neurospaces\_build} script:} As an example, for the component named {\tt <your-software>}, you would add the following code block to the configuration file:
\begin{verbatim}
	'<your-software>' => {
	   './configure' => ['--with-delete-operation'],
	   directory => "$ENV{HOME}/neurospaces_project/<your-software>/source/snapshots/0",
	   disabled => 0,
	   order => 1,
	   target_name => '<your-software>',
	   version_control => {
	      port_number => 4693,
	      repository => "$ENV{HOME}/neurospaces_project/MTN/<your-software>.mtn",
	   },
},
\end{verbatim}
  This code block includes the directory name where sources are to be
  found, the build order, and version control information ({\bf Note:}
  the server port number cannot be changed at anytime). The {\tt \$} indicates a terminal prompt.

\item {\bf Create the correct directory layout:}
\begin{verbatim}
   $ neurospaces_create_directories
\end{verbatim}
  
\item {\bf Create the monotone repository:}
\begin{verbatim}
   $ neurospaces_init
\end{verbatim}

\item {\bf Populate the new project with files:} Use monotone to check in your modifications regularly (see \href{../version-control/version-control.tex}{\bf Version\,Control} for more details).

\end{enumerate}

\subsubsection*{Making a new software component available to others}

Serving the source code over the internet makes it available to
others.  It is best, although not required, to employ a dedicated user on
your machine to serve the source code.

\begin{itemize}
\item {\bf Configure your new monotone server:} The information in the
  configuration of the new software component is used by the {\it
    neurospaces\_serve} command to make the source code available over
  the internet.  If you are only serving your own software component,
  use the ``{\tt --enable <your-software> --regex <your-software>}''
  command line arguments.
  
\item {\bf Synchronize your private monotone repository:} After the
  server has been configured the developer package tools can be used to
  synchronize your private changes with the server, provided all tools
  have been configured with the updated configuration for
  {\tt <your-software>}.  For example, {\it neurospaces\_sync} can be used
  to synchronize your private repository with the server repository.
\end{itemize}
  
\subsubsection*{Pushing the new software component to other computers}

The following steps will enable others to access your new software.

\begin{itemize}

\item {\bf Get a version of the developer package that contains the
    configuration for the new software component.}
  
\item {\bf Create the correct directory layout:}
\begin{verbatim}
	neurospaces_create_directories
\end{verbatim}

\item {\bf Create the private monotone repository:} This step is
  optional because the pull operation in the next step will create a
  new repository for the new software component if required.
\begin{verbatim}
	neurospaces_init
\end{verbatim}

\item {\bf Pull the repository from the server:}
\begin{verbatim}
	neurospaces_pull --enable <your-software> \
	   --regex <your-software>
\end{verbatim}
  
\item {\bf Update local source code with the latest source in the
    local repository, keeping local changes if any:}
\begin{verbatim}
	neurospaces_update --enable <your-software> \
	   --regex <your-software>
\end{verbatim}
  
\item {\bf Recompile all software components, and link them against
    each other:}
\begin{verbatim}
	neurospaces_install --configure
\end{verbatim}
  The ``{\tt --configure}'' argument enables configuration, which is
  needed for a new software component.
\end{itemize}

{\bf Note:} For further information on setting up and using the GENESIS repository for development see \href{../developer-repository/developer-repository.tex}{\bf Developer\,Repository}.

To extend the functionality of a pre-existing GENESIS {\bf Component} see \href{../genesis-extend-model-container}{\bf Extending the Model\,Container}.

%\subsection*{The\,{\it Developer Package}}

%This module provides developer utilities that comply with GENESIS development standards. The most important one is the\,{\it neurospaces\_build} script used for automated software installation and maintenance of a set of software modules. Because this script has many options, most common operations are provided using frontends. Other scripts are related to version identification of the software, and source code documentation comments.

%Some of the utilities currently depend on\,{\it monotone} for source code version control due to their configuration. However, it is possible to work with other version control systems. 

%\subsubsection*{{\it installer} Utilities}

%The main driver script performs various build operations:
%\begin{quote}
%\item {\it neurospaces\_build}
%\end{quote}
%Do ``{\tt neurospaces\_build --help}'' to see how it works.\\Also look at \href{../release-procedure/release-procedure.tex}{Release Procedure}. 

%\subsubsection*{Other utilities}

%These take optional arguments of ``{\tt --regex}'' to select the modules they will operate on, and ``{\tt --verbose}'' to run the command in a more verbose mode. 

%\begin{quote}
%\item {\it neurospaces\_packages}: Show the modules that are enabled on your local machine.
%\item {\it neurospaces\_versions}: Shows which versions of the GENESIS modules are installed. 

%\item {\it neurospaces\_pull}: Download the source code from a repository.
%\item {\it neurospaces\_status}: Check for local source code modification (no network required).
%\item {\it neurospaces\_sync}: Synchronize local source code modification with a repository.
%\item {\it neurospaces\_update}: Updates local source code using the repositories stored locally on your machine (i.e. it is a local operation). 

%\item {\it neurospaces\_install}: Install the simulator software.
%\item {\it neurospaces\_uninstall}: Uninstall the simulator software including the installer scripts. To reinstall, ``{\tt cd}'' to the installer source code directory and run ``{\tt make \&\& sudo make install}'').
%\item {\it neurospaces\_check}: Check for correctness of the installed software. This can be time consuming and generates considerable output, particularly in the ``{\tt --verbose}'' mode.
%\item {\it neurospaces\_clean}: Clean source code directories. 

%\item {\it neurospaces\_docs}: Build documentation on your local machine.
%\item {\it neurospaces\_website\_prepare}: Prepare a version of the website on your local machine, and optionally upload it. 

%\item {\it neurospaces\_cron}: Provides a cron job based tester script.

%\item {\it neurospaces\_download}: Download the simulator from a central archive. 
 
% \end{quote}

%For updating of version keywords the following are invoked automatically by the\,{\it neurospaces\_build} script:

%\begin{quote}
%\item {\it release\_extract}: Extract release information from a\,{\it monotone} repository. When a Tag is set, that will be the result, otherwise the SHA of the current base revision will be the result.
%\item {\it release\_expand}: Do keyword expansion, see the manpage in the source for more details. 
%\end{quote}

%Other:
%\begin{quote}
%\item {\it mcad2doxy}: Convert obsoleted {\it multicad} documentation to \href{http://www.stack.nl/~dimitri/doxygen/}{Doxygen} format. This has been used to convert \href{../heccer/heccer.tex}{Heccer} developer documentation to Doxygen format. Other modules will follow. 
%\end{quote}

\section*{Installing GENESIS on a Unix System}

Because GENESIS is compliant with the CBI simulator architecture, it consists of many independent software modules. To facilitate the installation of these modules, an installer has been written.

Prior to installing GENESIS modules on your local computer you will need to install the necessary software dependencies.

\subsection*{Software Dependencies}

Software dependencies are listed on the
\href{../genesis-dependencies/genesis-dependencies.tex}{GENESIS
  dependencies page}.

%These are divided into two categories:
%\begin{enumerate}
%\item {\bf Binary dependencies:}
%\begin{enumerate}
%\item {\bf A compiler, and a makefile system:} See the \href{http://www.gnu.org/}{GNU} website. Most Linux distributions come with these installed.
%\item {\bf \href{http://www.gtk.org/}{GTK+}:} Available for all common Linux distributions.
%\item {\bf \href{http://simpledirectorylisting.net/}{SDL2} for visualization functions:} For most systems there are prebuilt packages available. Note that SDL2 is required, SDL1 does not suffice.
%\item {\bf \href{http://www.graphviz.org}{Graphviz}:} For Redhat users: if you install this from an RPM, be sure to know what you are doing.
%\item {\bf  \href{http://www.python.org/}{Python} and  \href{http://www.perl.org/}{Perl} developer packages:} For example, the file Python.h must be installed. Note, it is often distributed in a separate\,{\it rpm} or\,{\it deb} file. 
%\end{enumerate}

%\item {\bf Perl dependencies:}

%All the following dependencies are available from \href{http://search.cpan.org/}{CPAN}. You can install them with a command line such as:
%\begin{verbatim}
%   sudo perl -MCPAN -e 'install Mail::Sender'
%\end{verbatim}
%where {\tt Mail::Sender} should be replaced with the appropriate module name. Also remove the parentheses and anything they contain, e.g.
%\begin{verbatim}
%   sudo perl -MCPAN -e 'install Glib'
%\end{verbatim}
%not
%\begin{verbatim}
%   sudo perl -MCPAN -e 'install Glib (Gtk2)'
%\end{verbatim}

%\begin{itemize}
%\item {\bf Mail::Sender}
%\item {\bf Clone}
%\item {\bf Expect::Simple}
%\item {\bf YAML}
%\item {\bf File::Find::Rule}
%\item {\bf Digest::SHA}
%\item {\bf Data::Utilities} 
%\end{itemize}

%\begin{itemize}
%\item {\bf ExtUtils::Depends (Gtk2)}
%\item {\bf ExtUtils::PkgConfig (Gtk2)}
%\item {\bf Glib (Gtk2)}
%\item {\bf Cairo (Gtk2)}
%\item {\bf Gtk2}
%\end{itemize}

%\begin{itemize}
%\item {\bf Bundle::CPAN} (SDL uses\,{\it Build.pl}, so make sure you have the latest version.) 
%\end{itemize}

%\begin{itemize}
%\item {\bf Redhat based systems:} The following\,{\it rpm}s have been successfully downloaded and installed:

%\begin{itemize}
%\item {\it SDL\_gfx-2.0.13-1.i386.rpm}
%\item {\it SDL\_gfx-debuginfo-2.0.13-1.i386.rpm}
%\item {\it SDL\_gfx-demos-2.0.13-1.i386.rpm}
%\item {\it SDL\_gfx-devel-2.0.13-1.i386.rpm}
%\item {\it SDL\_image-1.2.5-1.i386.rpm}
%\item {\it SDL\_image-devel-1.2.5-1.i386.rpm}
%\item {\it SDL\_mixer-1.2.7-1.i386.rpm}
%\item {\it SDL\_mixer-devel-1.2.7-1.i386.rpm}
%\item {\it SDL\_net-1.2.6-1.i386.rpm}
%\item {\it SDL\_net-devel-1.2.6-1.i386.rpm}
%\item {\it SDL\_Perl-2.1.3.tar.gz}
%\item {\it SDL\_ttf-2.0.8-1.i386.rpm}
%\item {\it SDL\_ttf-devel-2.0.8-1.i386.rpm}
%\end{itemize}

%\item {\bf Debian based systems (includes Ubuntu):} Debian files equivalent to the above {\it rpm} files are included in the standard \href{http://www.debian.org/}{Debian} repositories.
%\item {\it SDL} and  {\it GraphViz} are only required for the {\tt Neurospaces Studio}.
%\end{itemize}
%\end{enumerate}

%For some Linux distributions (???) these modules may be installed automatically with a \href{../prerequisite-script/prerequisite-script.tex}{\it Prerequisite Script} which provides an optional installer script for prerequisites and automated testing.

\subsection*{Linux Installation}

First install the {\it Developer Package} manually (see above), then
to download and install the available GENESIS modules enter:

\begin{itemize}
\item {\bf Create the correct directory layout:}
\begin{verbatim}
	neurospaces_create_directories
\end{verbatim}
  
\item {\bf Create the monotone repository:}
\begin{verbatim}
	neurospaces_init
\end{verbatim}

\item {\bf Pull all the code from the remote repositories:}
\begin{verbatim}
	neurospaces_pull
\end{verbatim}

\item {\bf Create workspace with up to date source code:}
\begin{verbatim}
	neurospaces_update
\end{verbatim}

\item {\bf Clean all workspaces:}
\begin{verbatim}
	neurospaces_clean
\end{verbatim}

\item {\bf Compile and install all the packages:}
\begin{verbatim}
	neurospaces_install
\end{verbatim}

\item {\bf Optionally check if the installation is successful:}
\begin{verbatim}
	neurospaces_check
\end{verbatim}

\end{itemize}

%\begin{verbatim}
%   neurospaces_build --download-server downloads.sourceforge.net \
%      --src-tag build-25 --src-dir <path-to-a-directory-for-unpacking> \
%      --regex 'heccer|ssp|studio|model-container' --verbose
%\end{verbatim}
%To check the installation, enter:
%\begin{verbatim}
%   neurospaces_build --check --no-install --src-tag build-25 \
%      --src-dir <path-to-a-directory-for-unpacking> \
%      --regex 'heccer|ssp|studio|model-container' --verbose
%\end{verbatim}
%Or download, install, and check with a single command:
%\begin{verbatim}
%   neurospaces_build --download-server downloads.sourceforge.net \
%      --src-tag build-25 --src-dir <path-to-a-directory-for-unpacking> \
%      --check --regex 'heccer|ssp|studio|model-container' --verbose
%\end{verbatim}

%Alternatively, we now give a full example that shows how to set up the\,{\it installer} repository on your local machine, check out the code and then use the\,{\it installer} to install all the currently available modules:

%\begin{verbatim}
%   ~ $ mkdir neurospaces_project/
%   ~ $ cd neurospaces_project/
%   neurospaces_project $ mkdir MTN
%   neurospaces_project $ cd MTN/
%   MTN $ mtn --db=installer.mtn db init
%   MTN $ mtn --db=installer.mtn pull repo-genesis3.cbi.utsa.edu:4696 "*"
%    mtn: doing anonymous pull; use -kKEYNAME if you need authentication
%    mtn: connecting to repo-genesis3.cbi.utsa.edu:4696
%    mtn: first time connecting to server repo-genesis3.cbi.utsa.edu:4696
%    mtn: I'll assume it's really them, but you might want to double-check
%    mtn: their key's fingerprint: cbc91b2ec1d19e95f64cb164cc2166f4bdfe7bf4
%    mtn: warning: saving public key for cbiadmin@utsa.edu to database
%    mtn: finding items to synchronize:
%    mtn:  bytes in | bytes out | certs in | revs in
%    mtn:   549.1 k |       510 |  754/754 | 183/183
%    mtn: successful exchange with repo-genesis3.cbi.utsa.edu:4696

%   MTN $ cd ../
%   neurospaces_project $ mkdir developer/
%   neurospaces_project $ mkdir developer/source
%   neurospaces_project $ mkdir developer/source/snapshots/
%   neurospaces_project $ mkdir developer/source/snapshots/0
%   neurospaces_project $ cd developer/source/snapshots/0/
%   0 $ mtn --db ~/neurospaces_project/MTN/installer.mtn --branch 0 co .
%   0 $ ls
%     aclocal.m4  bin/  configure*  configure.ac  COPYING  docs/  INSTALL
%     install-sh*  license.txt  Makefile.am  Makefile.in  missing* 
%     _MTN/  release-expand.config*  tests/  tests.config  TODO.txt

%   $ ./configure 
%    checking for a BSD-compatible install... /usr/bin/install -c
%    checking whether build environment is sane... yes
%    checking for gawk... gawk
%    checking whether make sets $(MAKE)... yes
%    find: tests/data: No such file or directory
%    configure: creating ./config.status
%    config.status: creating Makefile

%   0 $ make
%    make[1]: Entering directory `/local_home/hugo/neurospaces_project/  \
%       developer/source/snapshots/0'
%    make[1]: Nothing to be done for `all-am'.
%    make[1]: Leaving directory `/local_home/hugo/neurospaces_project/  \
%       developer/source/snapshots/0'

%   0 $ sudo make install
%    make[1]: Entering directory `/local_home/hugo/neurospaces_project/ \
%       developer/source/snapshots/0'
%    make[2]: Entering directory `/local_home/hugo/neurospaces_project/ \
%       developer/source/snapshots/0'
%    test -z "/usr/local/bin" || mkdir -p -- "/usr/local/bin"
%    /usr/bin/install -c 'bin/mcad2doxy' '/usr/local/bin/mcad2doxy'
%    /usr/bin/install -c 'bin/neurospaces_build' '/usr/local/bin/ \
%       neurospaces_build'
%    /usr/bin/install -c 'bin/neurospaces_status' '/usr/local/bin/ \
%       neurospaces_status'
%    /usr/bin/install -c 'bin/neurospaces_versions' '/usr/local/bin/ \
%       neurospaces_versions'
%    /usr/bin/install -c 'bin/release-expand' '/usr/local/bin/release-expand'
%    /usr/bin/install -c 'bin/release-extract' '/usr/local/bin/release-extract'
%    test -z "/usr/local/neurospaces/installer" || mkdir -p -- "/usr/local/ \
%       neurospaces/installer"
%    /local_home/hugo/neurospaces_project/developer/source/snapshots/0/ \
%       install-sh -c -m 644 'tests/introduction.html' '/usr/local/neurospaces/ \
%       developer/tests/introduction.html'
%    /local_home/hugo/neurospaces_project/developer/source/snapshots/0/ \
%       install-sh -c -m 644 'tests/specifications/global.t' '/usr/local/neurospaces/ \
%       developer/tests/specifications/global.t'
%    /local_home/hugo/neurospaces_project/developer/source/snapshots/0/ \
%       install-sh -c -m 644 'tests/specifications/downloads.t' '/usr/local/ \
%       neurospaces/developer/tests/specifications/downloads.t'
%    /local_home/hugo/neurospaces_project/developer/source/snapshots/0/ \
%    install-sh -c -m 644 'tests/specifications/developer.t' '/usr/local/ \
%    neurospaces/developer/tests/specifications/developer.t'
%    /local_home/hugo/neurospaces_project/developer/source/snapshots/0/ \
%       install-sh -c -m 644 'tests/specifications/strings/neurospaces_build \
%       --no-compile--no-configure--no-install--regex-installer--dry-run \
%       --developer--verbose--verbose--verbose.txt' '/usr/local/neurospaces/ \
%       developer/tests/specifications/strings/neurospaces_build--no-compile \
%       --no-configure--no-install--regex-installer--dry-run--developer \
%       --verbose--verbose--verbose.txt'
%    /local_home/hugo/neurospaces_project/developer/source/snapshots/0/ \
%       install-sh -c -m 644 'tests/specifications/strings/neurospaces_build \
%       --tag-build-10--no-compile--no-configure--no-install--regex-installer \
%       --dry-run--developer--verbose--verbose--verbose.txt' '/usr/local/ \
%       neurospaces/developer/tests/specifications/strings/neurospaces_build \
%       --tag-build-10--no-compile--no-configure--no-install--regex-installer \
%       --dry-run--developer--verbose--verbose--verbose.txt'
%    make[2]: Leaving directory `/local_home/hugo/neurospaces_project/ \
%       developer/source/snapshots/0'
%    make[1]: Leaving directory `/local_home/hugo/neurospaces_project/ 
%       developer/source/snapshots/0'

%   0 $ neurospaces_build --repo-pull repo-genesis3.cbi.utsa.edu --repo-co \
%      --directories-create --verbose --developer \
%      --regex 'heccer|model-container|ssp'
   
%\end{verbatim}

%\subsection*{Linux Installation Details}

%This section is based on\,{\it installer-build-13.tar.gz}. Installation takes the following steps:

%\begin{enumerate}
%\item {\bf Install the installer:}
%\begin{verbatim}
%   $ mkdir tmp ; cd tmp
%   $ mv <path to your installer module> tmp/installer-build-13.tar.gz
%   $ tar xfz installer-build-13.tar.gz
%   $ cd installer-build-13
%   $ ./configure
%   $ make
%   $ make check 
%   $ sudo make install 
%\end{verbatim}
%Now the\,{\it installer} has been installed. 

%\item {\bf Make a directory to contain downloaded modules:}
%\begin{verbatim}
%   $ mkdir $HOME/automated
%\end{verbatim}

%\item {\bf Download and install any other modules:}

%This is done automatically by the GENESIS\,{\it installer}. Use the following command line to install version {\tt des-10} of all modules:
%\begin{verbatim}
%   neurospaces_build --download-server downloads.sourceforge.net \
%      --regex 'model-container|heccer|ssp|studio' --src-tag des-10 \
%      --src-dir $HOME/automated
%\end{verbatim}
%To select individual modules, use the {\tt --regex} option, e.g. to install only {\it heccer}, enter:
%\begin{verbatim}
%   neurospaces_build --download-server downloads.sourceforge.net \
%      --regex heccer --src-tag des-10 --src-dir $HOME/automated
%\end{verbatim}
%Currently, not all modules are available for download. So always use the option {\tt --regex 'model-container|heccer|ssp|studio'}.

%If you don't trust what is going to happen, first use the {\tt --verbose option} (repeat it three times, see following command) and the {\tt --dry-run} option and pipe to {\it less} (or {\it more}):
%\begin{verbatim}
%   neurospaces_build --download-server downloads.sourceforge.net \
%      --src-tag des-10 --src-dir $HOME/automated --verbose --verbose \
%      --verbose --dry-run | less
%\end{verbatim}
%Now go for a coffee.  

%\item {\bf Test modules with the {\tt --check option}}:
%\begin{verbatim}
%   neurospaces_build --download-server downloads.sourceforge.net \
%      --src-tag des-10 --src-dir $HOME/automated --check
%\end{verbatim}
%Now go for another coffee (for about an hour this time). All modules will be tested. This takes some time. 

%If you have installed everything, and just want to test the installation, omit the download options:
%\begin{verbatim}
%   neurospaces_build --src-tag des-10 --src-dir $HOME/automated --check
%\end{verbatim}
%\end{enumerate}

\subsection*{Macintosh Installation}
\begin{enumerate}
\item {\bf Install Xcode Tools:} If Xcode Tools are not installed on your Mac obtain them from Disk\,2 of the Mac installer set of DVDs. The package is called\,{\it XcodeTools.mpkg}.

\item {\bf Install required packages from the CPAN archives:} This can be done by entering the following at a terminal prompt:
\begin{verbatim}
   $ sudo perl -MCPAN -e shell
\end{verbatim}
Then at the {\tt cpan>} prompt enter:
\begin{verbatim}
   cpan> force install Clone
   . . . 

   cpan> force install Data
   . . . 

   cpan> force install Data:Comparator
   . . . 

   cpan> force install File::Find::Rule
    . . .

   cpan> force install Digest::SHA
   . . . 
   
\end{verbatim}

\item Once these packages have been successfully installed, exit\,{\it cpan} and login as root with:
\begin{verbatim}
   $ sudo /bin/bash
\end{verbatim}
Enter password, then:
\begin{verbatim}
   bash-3.2# cd /var/root/.cpan/build
   bash-3.2# ls
    Clone-0.31          File-Find-Rule-0.30   Text-Glob-0.08
    Data-Utilities-0.04 Number-Compare-0.01   YAML-0.68
    Digest-SHA-5.47     Text-Editor-Easy-0.01 xisofs-1.3
\end{verbatim}

\item Then {\tt cd} to each of the directories in {\it ./cpan/build} and do a {\it make\,install} of the required packages:
\begin{verbatim}
   bash-3.2# cd Data-Utilities-0.04/
   bash-3.2# make install
   bash-3.2# cd ../Clone-0.31/
   bash-3.2# make install
   bash-3.2# cd ../Data-Utilities-0.04/
   bash-3.2# make install
   bash-3.2# cd File-Find-Rule-0.30/
   bash-3.2# make install
   bash-3.2# cd ../Text-Glob-0.08/
   bash-3.2# make install
   bash-3.2# cd Number-Compare-0.01/
   bash-3.2# make install
   bash-3.2# cd ../YAML-0.68/
   bash-3.2# make install
   bash-3.2# cd ../Digest-SHA-5.47/
   bash-3.2# make install
\end{verbatim}

\end{enumerate}

\subsection*{Microsoft Windows Installation}

UNDER CONSTRUCTION

\section*{Accessing the Version Control Repository from the {\it Developer Package}}

%The version control repository is accessible from the {\it InstallerPackage}. Important for this feature to work is to have the correct directory layout on your developer machine.

%In summary, what you want to do is this: {\it pull} the set of default packages from the servers:
%\begin{verbatim}
%   neurospaces_build --repo-pull repo-genesis3.cbi.utsa.edu --repo-co \
%      --verbose --developer --directories-create --no-configure \
%      --no-compile --no-install
%\end{verbatim}
%This command has options that inhibit the default actions of configuration, compilation and installation. If you also want to compile and install in just one run, simply omit those options:

%\begin{verbatim}
%   neurospaces_build --repo-pull repo-genesis3.cbi.utsa.edu --repo-co \
%      --verbose --developer --directories-create
%\end{verbatim}

There are developer friendly frontends to the {\it neurospaces\_build} script in the {\it InstallerPackage}:
\begin{itemize}
\item {\bf neurospaces\_serve:} Starts serving the source code repositories such that other people can {\it pull} and {\it sync} to your machine (note that this locks all your databases).
\item {\bf neurospaces\_pull:} Download the source code from a repository.
\item {\bf neurospaces\_status:} Check for local source code modification (no network required).
\item {\bf neurospaces\_sync:} Synchronize local source code modification with a repository.
\item {\bf neurospaces\_update:} Makes the local source code up to date using the repositories locally stored on your computer (so this is a local operation). 
\end{itemize}

%\section*{Details}

%\begin{itemize}

%\item {\bf Pulling to your local repository:}
%\begin{verbatim}
%   neurospaces_build --repo-pull repo-genesis3.cbi.utsa.edu \
%      --no-configure --no-install --no-compile --verbose \
%      --developer --regex 'heccer|model-container|ssp'
%\end{verbatim}

%\item {\bf Checkout from your local repository:}
%\begin{verbatim}
%   neurospaces_build --repo-co --no-configure --no-install \
%      --no-compile --verbose --developer \
%      --regex 'heccer|model-container|ssp'
%\end{verbatim}

%\item {\bf When you start from scratch it is useful to create the workspace directories:}
%\begin{verbatim}
%   neurospaces_build --repo-co --no-configure --no-install \
%      --no-compile --verbose --developer \
%      --regex 'heccer|model-container|ssp' --directories-create
%\end{verbatim}

%\item {\bf Combining everything for the set of default packages, including compilation and installation:}
%\begin{verbatim}
%   neurospaces_build --repo-pull repo-genesis3.cbi.utsa.edu \
%      --repo-co --verbose --developer --directories-create
%\end{verbatim}

%\end{itemize}

\end{document}

