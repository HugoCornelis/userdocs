\documentclass[12pt]{article}
\usepackage{verbatim}
\usepackage[dvips]{epsfig}
\usepackage{color}
\usepackage{url}
\usepackage[colorlinks=true]{hyperref}

\begin{document}

\section*{GENESIS: Documentation}

{\bf Related Documentation:} \\
\href{../genesis-system/genesis-system.tex}{\bf GENESIS\,System}
% start: userdocs-tag-replace-items related-do-nothing
% end: userdocs-tag-replace-items related-do-nothing


\section*{Developer Installation From Source On Mac OSX -- Snow Leopard}

The procedure for the installation of GENESIS on a Mac OSX is similar to that for a Linux build on a regular PC. The major difference is that it requires build tools for the Mac. These are somewhat hidden on disk 2 of the Mac OS installation disks. Installation requires administrator privileges. ({\bf Note:} Some installation must be done from the Terminal). If you do not have administrator privileges you should contact your system administrator for help. The Terminal can be found in the Applications --$>$ Utilities folder. For regular use of GENESIS it is convenient to place a Terminal in the dock for easy access.
Installation requires executing the following major steps:
\begin{itemize}
   \item[] Prepare and upgrade the system software.
   \item[] Download and install the developer package.
   \item[] Install the software packages.
   \item[] Check if the installation was successful. 
\end{itemize}

\subsection*{Prepare and upgrade the system software}

Install the following packages:
\begin{itemize}
   \item[]\href{http://monotone.ca/}{\bf monotone-0.44:} (or higher).

% perl YAML
% mercurial

% see http://jsdelfino.blogspot.be/2012/08/autoconf-and-automake-on-mac-os-x.html

% autoconf
% automake
% libtool
% pcre from sourceforge
% flex from sourceforge

   \item[]{\bf Xcode Tools:} The Apple Development Toolset. Xcode is available on Disk 2 of the Mac OSX installer set of DVDs under optional install. The package is called {\it  XcodeTools.mpkg}. It is also available from the \href{http://developer.apple.com/technology/xcode.html}{\bf Apple Developer Website}. In the latter case  you will need a valid Apple ID to log in and access the developer page.

% install make from the Xcode/preferences menu
   
  \item[]\href{http://python.org/}{Python:} OS X comes with python and is located at {\it /usr/bin/python}, in the default path. You can also use the python from http://python.org, GENESIS 3 has been confirmed to compile on python versions 2.5, 2.6, and 2.7. 
\end{itemize}
   
   {\bf WARNING:} The compilers available from MacPorts should NOT be used for installation (see below). Prior to installing the {\it DeveloperPackage} you should check which Perl libraries OSX uses with ``{\tt  which perl}''. This should return {\tt  /usr/bin/perl}. If the response is {\tt /opt/local/bin/perl}, there is a MacPorts installation of Perl. This is most easily corrected by removing the MacPorts path {\it /opt/local/bin} from your path in the {\it .profile} file (or the {\it .bash\_profile}) in your home directory. To do this open the  {\it .profile} file in an editor and convert the line (or similar):
\begin{verbatim}
   PATH=/opt/local/bin:/usr/local/bin:$PATH
\end{verbatim}
by removing {\it /opt/local/bin} to give:
\begin{verbatim}
   PATH=/usr/local/bin:$PATH
\end{verbatim}
{\bf Note:} Only remove the MacPorts path and leave all others alone. If you do not make this change, running GENESIS may result in a bus error as the correct Perl libraries will not be found. It may also call MacPorts versions of build tools, which can result in some undesirable behavior.  
   
   
\subsection*{Download and Install the {\it DeveloperPackage}}

Download the latest version of the \href{https://github.com/HugoCornelis/developer/blob/master/developer-0.0.0-alpha.tar.gz?raw=true}{{\it DeveloperPackage}}.  ({\bf Note:} If downloading via your browser, do not unpack the package during the download as it will be placed into its own subdirectory).

\begin{itemize}
   \item[] Change to the directory where you downloaded the file.
   \item[] Unpack archive: ``{\tt tar xfz developer-release-label.tar.gz}''.
   \item[] Change to the directory with the content of the archive: ``{\tt cd developer-release-label}''.
   \item[] Configure the {\it DeveloperPackage}: ``{\tt ./configure}''.
   \item[] Compile and install the {\it DeveloperPackage}: ``{\tt make \&\& sudo make install}'' (requires administrator privileges).
\end{itemize}


\subsection*{Install software packages}

%Install the following Perl dependencies via CPAN:
%     \begin{itemize}
%         \item YAML
%         \item Parse::RecDescent
%         \item Expect (and its dependency perl-IO)
%         \item ExtUtils::MakeMaker
%         \item Term::ReadLine
%      \end{itemize}
%   \end{itemize}
%This can be done, for example, by entering the following at a terminal prompt:
%\begin{verbatim}
%   $ sudo perl -MCPAN -e shell
%\end{verbatim}
%Then at the {\tt cpan>} prompt enter:
%\begin{verbatim}
%   cpan> force install YAML
%   . . . 
%\end{verbatim}

Download the and install the \href{../../developer-package/developer-package.tex}{\bf developer package}. Once that is done source code can be pulled from the GENESIS repository and a build performed with the following commands:
\begin{enumerate}
   \item{\it neurospaces\_create\_directories}
   \item{\it neurospaces\_pull}
   \item{\it neurospaces\_update}
   \item{\it neurospaces\_configure}
   \item{\it neurospaces\_install} (requires admin password) 
\end{enumerate}

If there are any mixed architectures on some of the programs on the machine then you must use the {\it --universal} flag. For instance if the current version of python in your path is 32-bit and the host machine is 64-bit, then you should use the universal flag. Easy way to tell what a programs architecture is is to use the lipo command on the executable file:

\begin{verbatim}
lipo -info `which python`
Architectures in the fat file: /usr/bin/python are: x86_64 i386 ppc7400
\end{verbatim}

The architectures can be read as follows.

\begin{itemize}
   \item[] {\bf x86\_64}: 64-bit Intel 
   \item[] {\bf i386, i486, i586, i686}: 32-bit Intel (with i386 being the most common)
   \item[] {\bf ppc, ppc7400}: Power PC architecture
\end{itemize}

If you are using all pure apple programs for perl and python with no macports, then it is safe to use {\it --universal} for any calls to {\it neurospaces\_install} and {\it neurospaces\_upgrade}. However it should be noted that this will increase the compile time three fold.

\subsection*{Check if installation was successful}

Once these have completed the installation can be tested with the following command:
\begin{itemize}
   \item[]{\tt neurospaces\_check $>$/tmp/check.out 2$>$\&1}3
\end{itemize}
This will perform a series of regression tests and save the output to file. The output can be checked by typing ``{\tt less /tmp/check.out}''. Importantly, search for lines containing the string {\tt error\_count} that will indicate any inconsistencies with the installation.

{\bf Note:} The running of tests is optional, but strongly advised.





\end{document}
