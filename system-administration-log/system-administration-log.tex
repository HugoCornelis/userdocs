\documentclass[12pt]{article}
\usepackage{verbatim}
\usepackage[dvips]{epsfig}
\usepackage{color}
\usepackage{url}
\usepackage[colorlinks=true]{hyperref}

\begin{document}

\section*{GENESIS: Documentation}

{\bf Related Documentation:}
% start: userdocs-tag-replace-items related-genesis-systems
% end: userdocs-tag-replace-items related-genesis-systems

\section*{System Administration Log}

This is a document listing all of all administration done on machines
used in the GENESIS project.

Please only add records.  Do not delete or modify existing records.

In the past the file system of some of the machines supporting for G-3
development had become corrupted because of all the manual
maintenance.  Therefore we keep track of the manual maintenance, and
try to automate as much as possible over the
\href{../version-control/version-control.tex}{source code
  repositories} and
\href{../neurospaces-cron/neurospaces-cron.tex}{cron jobs}.

\subsection*{repo-genesis3.cbi.utsa.edu}

The repository machine serves the source code for the GENESIS project as well as periodically performing automated source code checks. This machine also has a running web server that hosts the projects: doxygen documentation, regression tests, and various package distributions.


\begin{itemize}

\item
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 11/22/2010 
\item[] {\bf Actions:} Added Dave's monotone key to the userdocs system.
\item[] {\bf Reason:} Dave needs his key added so that he can add documents.
\item[] {\bf Impact:} None.
\end{itemize}
	
\item
\begin{itemize}
\item[] {\bf Admin:} Hugo
\item[] {\bf Date:} 11/08/2010 
\item[] {\bf Actions:} Checking file timestamps, diffing expected and seen output.
\item[] {\bf Reason:} One test that started failing without any
  apparant reason.  The output test of the gshell seems not to respect
  the output clock anymore, unknown reason.
\item[] {\bf Impact:} None.
\end{itemize}	

\item
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 10/28/2010 
\item[] {\bf Actions:} Fixed some issues with the userdocs installation on the repository. 
\item[] {\bf Reason:} Build was failing due to some permission errors. Errors with the gtube specification images still remain. Difficult to diagnose due to very vague error message. Forums don't provide much help.
\item[] {\bf Impact:} Cronjob for building userdocs on the repo should proceed as normal.
\end{itemize}	

\item
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 10/22/2010 
\item[] {\bf Actions:} Attempted to fix the issues with images on the repository userdocs installation. 
\item[] {\bf Reason:} All gtube technical specification images are gone. Making a png of an eps fails with the non descriptive "Unrecoverable error, exit code 1" message. Also some other images have images cropped off on their sides for no apparent reason.
\item[] {\bf Impact:} None, tho the issue remains.
\end{itemize}	

\item
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 10/21/2010 
\item[] {\bf Actions:} Set up the documentation system on a cron job on the repository. 
\item[] {\bf Reason:} Darwin mangles figures, linking the documentation from the repo is a short term fix.
\item[] {\bf Impact:} Debian latex should make it easier to fix the issue with the mangled figures.
\end{itemize}

\item
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 10/10/2010 
\item[] {\bf Actions:} Uploaded some doxygen and epydoc documentation for the gtube source code. 
\item[] {\bf Reason:} Doesn't automatically update and there is no hook for epydoc yet. Want to see the look and functionality of both sets of documentation on the server.
\item[] {\bf Impact:} Two sets of "identical" documentation are now on the server, each with their own sets of features and appearances.
\end{itemize}
	
\item
\begin{itemize}
\item[] {\bf Admin:} Hugo
\item[] {\bf Date:} 9/26/2010 
\item[] {\bf Actions:} Added a line 'LOGDIR: /var/www/html/tests/neurospaces\_cron\_logs' to '/home/g3tester/neurospaces\_cron\_all.yml'.
\item[] {\bf Reason:} Sometimes the tester output of two consecutive
  cron jobs gets concatenated into one neurospaces\_cron.stdout file.
\item[] {\bf Impact:} No doubled output anymore for two consecutively executed cron jobs.
\end{itemize}

\item
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 9/16/2010 
\item[] {\bf Actions:} Inspected permissions on directories served over the internet.
\item[] {\bf Reason:} Suspected some files or directories may be owned by root instead of g3tester. Was not the case, permissions were ok.
\item[] {\bf Impact:} None
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 9/16/2010 
\item[] {\bf Actions:} Retrieve a copy of the neurospaces\_cron configuration file for testing.
\item[] {\bf Reason:} Going to retest the output of source tarballs and packages with the same configuration to check for any bugs.
\item[] {\bf Impact:} None
\end{itemize}
	
\item 
\begin{itemize}
\item[] {\bf Admin:} Hugo
\item[] {\bf Date:} 8/29/2010 
\item[] {\bf Actions:} Inspecting crontab and tester configuration
  files.
\item[] {\bf Reason:} Sometimes the tester output of two consecutive
  cron jobs gets concatenated into one neurospaces\_cron.stdout file.
  This seems to happen only when the configuration file
  ``/home/g3tester/neurospaces\_cron\_all.yml'' is used.  For those
  runs, errors are reported twice because they occur twice in the
  report that reports about two consecutive runs.
  The line
\begin{verbatim}
LOGDIR: /var/www/html/tests/neurospaces_cron_logs
\end{verbatim}
  is missing from ``/home/g3tester/neurospaces\_cron\_all.yml'', such
  that neurospaces\_cron does not rotate logs in the correct directory
  (I guess it attempts it either in the /tmp or /root directory).
  Inside neurospaces\_cron the function rotate\_logs() is likely also
  responsible for partial truncation of the output file.
\item[] {\bf Impact:} None
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 8/22/2010 
\item[] {\bf Actions:} Removed source code directories building up during packaging.
\item[] {\bf Reason:} The unzipped directories were not being cleaned by the packaging process. Extra directories of code were appearing in the doxygen documentation.
\item[] {\bf Impact:} Doxygen documentation should no longer have multiple directories of the same code listed.
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Hugo
\item[] {\bf Date:} 8/22/2010 
\item[] {\bf Actions:} None
\item[] {\bf Reason:} It takes a very long time to execute
  userdocs-sync and neurospaces\_sync.  Checking if ssh connection to
  repo-genesis3 and other servers takes as long (and it does).
\item[] {\bf Impact:} None.
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 8/20/2010 
\item[] {\bf Actions:} Added monotone keys for my other machines: the 64 bit desktop, desktop and laptop Virtual machines.
\item[] {\bf Reason:} Could not sync to the experiment repository from my other machines.
\item[] {\bf Impact:} Public keys for three other machines are now on the experiment repository.
\end{itemize}
	
\item 
\begin{itemize}
\item[] {\bf Admin:} Hugo
\item[] {\bf Date:} 8/15/2010 
\item[] {\bf Actions:} Inspecting directories inside
  /home/g3tester/neurospaces\_project/gshell/source/snapshots/0/
\item[] {\bf Reason:} The gshell ns-sli tests are failing, diagnosis
  only.
\item[] {\bf Impact:} None.
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 8/13/2010 
\item[] {\bf Actions:} Deleted a directory with outdated gtube doxygen docs.
\item[] {\bf Reason:} It is not fully integrated into the cronjob yet so had to be done manually.
\item[] {\bf Impact:} N/A
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 8/13/2010 
\item[] {\bf Actions:} Installed fakeroot.
\item[] {\bf Reason:} fakeroot was not installed and it used by the package builder. Updated debian server document as needed.
\item[] {\bf Impact:} N/A
\end{itemize}

	
\item 
\begin{itemize}
\item[] {\bf Admin:} Hugo
\item[] {\bf Date:} 8/13/2010 
\item[] {\bf Actions:} Inspecting directories inside
  /home/g3tester/neurospaces\_project/gshell/source/snapshots/0/
\item[] {\bf Reason:} The gshell ns-sli tests are failing, diagnosis
  only.  It looks as if the test scripts do not produce output files
  because the output directories do not exist.
\begin{verbatim}
*** Application output file: ./..//output/cell.out (in /home/g3tester/neurospaces_project/gshell/source/snapshots/0/tests)
cat: ./..//output/cell.out: No such file or directory
*** Expected output file: /usr/local/ns-sli/tests/specifications/strings/traub91_asym.ssp
\end{verbatim}
and
\begin{verbatim}
*** Error: 3:Child PID 8006 exited with status 11 (Do we see the simulation time after the simulation has finished ?, package gshell, sli.t, error_count 2)
...
*** Application output file: ./..//tests/results/PurkM9_soma_1.5nA (in /home/g3tester/neurospaces_project/gshell/source/snapshots/0/tests)
cat: ./..//tests/results/PurkM9_soma_1.5nA: No such file or directory
*** Expected output file: /usr/local/ns-sli/tests/specifications/strings/PurkM9_soma_1.5nA.g3-double
\end{verbatim}
\item[] {\bf Impact:} None.
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Hugo
\item[] {\bf Date:} 8/12/2010 
\item[] {\bf Actions:} Attempt to install XML::Simple from CPAN.
Got Expat.xs:12:19: error: expat.h: No such file or directory, so also installed libexpat1-dev

\item[] {\bf Reason:} The exchange tests were failing.
\item[] {\bf Impact:} Installed libexpat1-dev and XML::Simple and its
  CPAN dependencies.  perl -e 'use XML::Simple' is successful.
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 8/12/2010 
\item[] {\bf Actions:} 
\begin{itemize}
	\item[] 1. Restarted the monotone repository servers.
	\item[] 2. Installed package building software.
\end{itemize}
\item[] {\bf Reason:} 
\begin{itemize}
	\item[] 1. At some point late 8/11 or early 8/12 the monotone repositories became unconnectable. Cause unknown for now but will continue to monitor the situation.
	\item[] 2. The noon cron run uses dpkg and rpmbuild to build packages, needed to install them. Updated neurospaces-cron document to reflect this.
\end{itemize}
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 8/11/2010 
\item[] {\bf Actions:} Continued installation of server software.
\item[] {\bf Reason:} 
\begin{itemize}
\item[] Needed more packages installed for doxygen, source-highlight, tex, etc. 
\item[] Added and documented how to install a package to set the clock time.
\item[] Cronjob for Noon did not go off so testing crontab with a wall command:
\begin{verbatim}
	* * * * * root wall /etc/testmsg
\end{verbatim}
Where testmsg is a text file with a broadcast message.
\end{itemize}
	
\item[] {\bf Impact:} 
\begin{itemize}
\item[] Doxygen documentation should be updated with graphs and regression tests should be updated on cronrun. 
\item[] Time is properly set on the server.
\item[] cron daemon was verified to work correctly.
\end{itemize}
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Hugo
\item[] {\bf Date:} 8/10/2010 
\item[] {\bf Actions:} Upgrade the monotone repository to version 0.48
  (mtn db migrate). Manual upgrade of the developer package
  (neurospaces\_pull, neurospaces\_update, neurospaces\_install on the
  developer package only).  Then as the monotone user:
  neurospaces\_create\_directories and neurospaces\_init --regex
  experiment.
\begin{verbatim}
as monotone: cat monotone_keys/mando.pubkey monotone_keys/hugo.pubkey monotone_keys/allan.pubkey | mtn --db=~/neurospaces_project/MTN/experiment.mtn read
as root: sudo -H -u monotone nohup neurospaces_serve &
on my laptop: neurospaces_sync
\end{verbatim}
\item[] {\bf Reason:} Developer package configuration was updated with
  the experiment software package.  The experiment monotone server
  must be created and started manually.
\item[] {\bf Impact:} All repositories (includes the experiment
  repository) should be up and running again.
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 8/10/2010 
\item[] {\bf Actions:} Started installation of repository software.
\item[] {\bf Reason:} Repository machine was reinstalled.
\item[] {\bf Impact:} N/A
\end{itemize}


\item 
\begin{itemize}
\item[] {\bf Admin:} Hugo
\item[] {\bf Date:} 8/10/2010 
\item[] {\bf Actions:} Check if the repo was already reinstalled.
\item[] {\bf Reason:} Check if the repo was already reinstalled.
\item[] {\bf Impact:} None.
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 8/9/2010 
\item[] {\bf Actions:} Restarted monotone repositories.
\item[] {\bf Reason:} Userdocs repository got "stuck"
\item[] {\bf Impact:} N/A
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 8/9/2010 
\item[] {\bf Actions:} Backed up system and data files.
\item[] {\bf Reason:} Need the files to set up the server after reinstallation.
\item[] {\bf Impact:} N/A
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 7/9/2010 
\item[] {\bf Actions:} Started monotone server, removed old 32-bit RPM files and directories to upload newer versions, and did an integrity check on the server.
\item[] {\bf Reason:} Server had a new hard drive installed and rebuilt the RAID so needed to start the monotone server that does not start on boot and make sure it was running properly. 
\item[] {\bf Impact:} N/A
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 7/6/2010
\item[] {\bf Actions:} Removed old Mac OSX NS-SLI package from the downloadable area.
\item[] {\bf Reason:}   Package has a known bug in determining the execution path. 
\item[] {\bf Impact:} Should not affect Repository or Tester operations.
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 7/2/2010 
\item[] {\bf Actions:} Removed simrc file in g3tester home directory after fixing the problem with finding the simrc in the executable directory.
\item[] {\bf Reason:} The .simrc-ns-sli file in the home directory was masking a bug in determining the simrc file in the executable directory. 
\item[] {\bf Impact:} Removing the file will allow the tests to continue with a file that is under monotone control.
\end{itemize}
\end{itemize}




\subsection*{darwin.cbi.utsa.edu}

This machine hosts the GENESIS website as well as the output from the user documentation system. All of the user documentation building tasks are done through a single non-root user account named \'genesis\'.

\begin{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Hugo
\item[] {\bf Date:} 9/21/2010 
\item[] {\bf Actions:} Comparing monotone version control identifiers, checking output of latex compilation.  The cbi-archtecture document is tagged as draft, so it is not compiled by the documentation system during a build.  This behavior is undesirable for some documents but is ok for others.  Maybe we need to introduce a new tag for this type of situation.  Added to the developer TODOs.
\item[] {\bf Reason:} The cbi-archtecture document fails to compile, but the errors are not reported by the documentation system.
\item[] {\bf Impact:} None.
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Hugo
\item[] {\bf Date:} 9/21/2010 
\item[] {\bf Actions:} Check for the availability of variants of the
  script rst2pdf.
\item[] {\bf Reason:} The rst2pdf script is not found (although
  rst2html is).
\item[] {\bf Impact:} None.
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Hugo
\item[] {\bf Date:} 9/21/2010 
\item[] {\bf Actions:} Check if the document input-models-notes was
  generated on darwin.  It looks as if the missing rst2pdf script
  makes for a situation where the successfully build html is not
  published.
\item[] {\bf Reason:} input-models-notes is not available from the
  website index page.
\item[] {\bf Impact:} None.
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 9/20/2010 
\item[] {\bf Actions:} Installed unrtf and docutils from source (Performed as root).
\item[] {\bf Reason:} The rst2html and unrtf commands are not found and not on yum.
\item[] {\bf Impact:} Documentation features should be enabled.
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Hugo
\item[] {\bf Date:} 9/20/2010 
\item[] {\bf Actions:} Checking for the existence of the commands
  rst2html and unrtf. 
\item[] {\bf Reason:} The rst2html and unrtf commands are required for
  document building.
\item[] {\bf Impact:} None
\end{itemize}
	
\item 
\begin{itemize}
\item[] {\bf Admin:} Hugo
\item[] {\bf Date:} 8/31/2010
\item[] {\bf Reason:} Checking the availability of restructured text on darwin.
\item[] {\bf Actions:} Unsuccessful attempts to install with 'yum install python-docutils'.
\item[] {\bf Impact:} None expected.
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 8/23/2010
\item[] {\bf Actions:} Installed the rest of the dependencies needed to get all of GENESIS 3 working as listed in \href{../installation-fedora12/installation-fedora12.tex}. Should be noted that all installation was done via root, not the genesis user.
\item[] {\bf Reason:} Userdocs needs the gshell functional to dynamically create documentation snippets. 
\item[] {\bf Impact:} All tests (sans the ones with known issues) are now functional on darwin.
\end{itemize}
	
\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 7/12/2010
\item[] {\bf Reason:} Need to update website to search through userdocs. 
\item[] {\bf Actions:} Made some changes to the website software that was to allow searching through all imported html files with the intent that it would allow quick searches through userdocs.  
\item[] {\bf Impact:} Did not go as planned, the imported static html pages do not seem to be properly indexed in the site search. Needed to update the cron script to the newest version due to a new feature needed, this should not affect operations.
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 7/10/2010
\item[] {\bf Reason:} Need to update website to search through userdocs. 
\item[] {\bf Actions:} Did work on the website software. 
\item[] {\bf Impact:} N/A
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 7/7/2010
\item[] {\bf Reason:} Need to add a sitemap to the userdocs.
\item[] {\bf Actions:} Did work on the website software. 
\item[] {\bf Impact:} N/A
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 7/6/2010
\item[] {\bf Reason:} Need to add some files to work with google custom search.
\item[] {\bf Actions:} Did work on the website software. 
\item[] {\bf Impact:} N/A
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 7/2/2010
\item[] {\bf Reason:} Website software and database needed updating.
\item[] {\bf Actions:} Did work on the website software. 
\item[] {\bf Impact:} N/A
\end{itemize}
\end{itemize}

\subsection*{Mac Tester}

The Mac tester is an iMac machine located at {\bf CBI} that runs the tester on a cronjob. It is also used for debugging and building packages for 32-bit Mac OSX Snow Leopard.

System specs:
\begin{itemize}
\item[] {\bf Processor:} 2 Ghz Intel Core Duo
\item[] {\bf Memory:} 2 GB 667 Mhz DDR2 SDRAM
\item[] {\bf Operating System:} Mac OSX Snow Leopard (Version 10.6.4) 
\end{itemize}

\begin{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 9/14/2010
\item[] {\bf Reason:} An error citing python as being not executable. 
\item[] {\bf Actions:} env now finds /usr/bin before the standard mac python location. Added the standard mac location to the crontab path as it cites only the regular unix locations.
\item[] {\bf Impact:} Test should not output an error any longer.
\end{itemize}
	
\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 9/9/2010
\item[] {\bf Reason:} Observed build errors (die messages) in the tester email. 
\item[] {\bf Actions:} Inspected project directories and performed a distclean and uninstall.
\item[] {\bf Impact:} None
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 9/3/2010
\item[] {\bf Reason:} Chronic test failures (which have been verified to work correctly). 
\item[] {\bf Actions:} Examined tester expected and seen files since they can't be available over the internet.
\item[] {\bf Impact:} As of the time of logout, None.
\end{itemize}
	
\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 8/19/2010
\item[] {\bf Reason:} Build is failing. 
\item[] {\bf Actions:} Performed an uninstall and distclean.
\item[] {\bf Impact:} Build is functioning as normal.
\end{itemize}
	
\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 8/19/2010
\item[] {\bf Reason:} Build is failing. 
\item[] {\bf Actions:} Logged on to diagnose problem.
\item[] {\bf Impact:} N/A
\end{itemize}
	
\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 7/14/2010
\item[] {\bf Reason:} Prevent tester from performing unnecessary merging. 
\item[] {\bf Actions:} Turn on the \"no automated merges\" feature in the developer package.
\item[] {\bf Impact:} N/A
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 7/12/2010
\item[] {\bf Reason:} Tester is "stuck" due to a bug in monotone that causes a merge conflict.
\item[] {\bf Actions:} Made a copy of the "stuck" monotone repositories and did a fresh pull. Since monotone version is 0.47, will check to see if this is a new bug or one that was previously fixed.
\item[] {\bf Impact:} Tester now proceeds as normal. 
\end{itemize}

\item 
\begin{itemize}
\item[] {\bf Admin:} Mando
\item[] {\bf Date:} 7/6/2010
\item[] {\bf Reason:} Allow more developers to see test runs on the mac.
\item[] {\bf Actions:} Added Hugo to the Mac Tester email.
\item[] {\bf Impact:} N/A
\end{itemize}
\end{itemize}


\end{document}
